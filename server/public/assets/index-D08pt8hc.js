(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var si={exports:{}},rs;function Ha(){return rs||(rs=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,f,d){this.fn=h,this.context=f,this.once=d||!1}function s(h,f,d,m,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var P=new i(d,m||h,A),X=n?n+f:f;return h._events[X]?h._events[X].fn?h._events[X]=[h._events[X],P]:h._events[X].push(P):(h._events[X]=P,h._eventsCount++),h}function l(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],d,m;if(this._eventsCount===0)return f;for(m in d=this._events)e.call(d,m)&&f.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},u.prototype.listeners=function(f){var d=n?n+f:f,m=this._events[d];if(!m)return[];if(m.fn)return[m.fn];for(var A=0,P=m.length,X=new Array(P);A<P;A++)X[A]=m[A].fn;return X},u.prototype.listenerCount=function(f){var d=n?n+f:f,m=this._events[d];return m?m.fn?1:m.length:0},u.prototype.emit=function(f,d,m,A,P,X){var H=n?n+f:f;if(!this._events[H])return!1;var k=this._events[H],ue=arguments.length,ae,se;if(k.fn){switch(k.once&&this.removeListener(f,k.fn,void 0,!0),ue){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,d),!0;case 3:return k.fn.call(k.context,d,m),!0;case 4:return k.fn.call(k.context,d,m,A),!0;case 5:return k.fn.call(k.context,d,m,A,P),!0;case 6:return k.fn.call(k.context,d,m,A,P,X),!0}for(se=1,ae=new Array(ue-1);se<ue;se++)ae[se-1]=arguments[se];k.fn.apply(k.context,ae)}else{var Se=k.length,be;for(se=0;se<Se;se++)switch(k[se].once&&this.removeListener(f,k[se].fn,void 0,!0),ue){case 1:k[se].fn.call(k[se].context);break;case 2:k[se].fn.call(k[se].context,d);break;case 3:k[se].fn.call(k[se].context,d,m);break;case 4:k[se].fn.call(k[se].context,d,m,A);break;default:if(!ae)for(be=1,ae=new Array(ue-1);be<ue;be++)ae[be-1]=arguments[be];k[se].fn.apply(k[se].context,ae)}}return!0},u.prototype.on=function(f,d,m){return s(this,f,d,m,!1)},u.prototype.once=function(f,d,m){return s(this,f,d,m,!0)},u.prototype.removeListener=function(f,d,m,A){var P=n?n+f:f;if(!this._events[P])return this;if(!d)return l(this,P),this;var X=this._events[P];if(X.fn)X.fn===d&&(!A||X.once)&&(!m||X.context===m)&&l(this,P);else{for(var H=0,k=[],ue=X.length;H<ue;H++)(X[H].fn!==d||A&&!X[H].once||m&&X[H].context!==m)&&k.push(X[H]);k.length?this._events[P]=k.length===1?k[0]:k:l(this,P)}return this},u.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&l(this,d)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(si)),si.exports}var qa=Ha(),Ca=Ss(qa),ne;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const l of i)s[l]=l;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of s)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&s.push(l);return s},t.find=(i,s)=>{for(const l of i)if(s(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ne||(ne={}));var mi;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(mi||(mi={}));const D=ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rt=t=>{switch(typeof t){case"undefined":return D.undefined;case"string":return D.string;case"number":return isNaN(t)?D.nan:D.number;case"boolean":return D.boolean;case"function":return D.function;case"bigint":return D.bigint;case"symbol":return D.symbol;case"object":return Array.isArray(t)?D.array:t===null?D.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?D.promise:typeof Map<"u"&&t instanceof Map?D.map:typeof Set<"u"&&t instanceof Set?D.set:typeof Date<"u"&&t instanceof Date?D.date:D.object;default:return D.unknown}},O=ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Za=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ce extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const l of s.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,h=0;for(;h<l.path.length;){const f=l.path[h];h===l.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(n(l))):u[f]=u[f]||{_errors:[]},u=u[f],h++}}};return i(this),r}static assert(e){if(!(e instanceof Ce))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ce.create=t=>new Ce(t);const sn=(t,e)=>{let n;switch(t.code){case O.invalid_type:t.received===D.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case O.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ne.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:n=`Unrecognized key(s) in object: ${ne.joinValues(t.keys,", ")}`;break;case O.invalid_union:n="Invalid input";break;case O.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ne.joinValues(t.options)}`;break;case O.invalid_enum_value:n=`Invalid enum value. Expected ${ne.joinValues(t.options)}, received '${t.received}'`;break;case O.invalid_arguments:n="Invalid function arguments";break;case O.invalid_return_type:n="Invalid function return type";break;case O.invalid_date:n="Invalid date";break;case O.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ne.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case O.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case O.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case O.custom:n="Invalid input";break;case O.invalid_intersection_types:n="Intersection results could not be merged";break;case O.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case O.not_finite:n="Number must be finite";break;default:n=e.defaultError,ne.assertNever(t)}return{message:n}};let As=sn;function Fa(t){As=t}function Ir(){return As}const Or=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],l={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let u="";const h=r.filter(f=>!!f).slice().reverse();for(const f of h)u=f(l,{data:e,defaultError:u}).message;return{...i,path:s,message:u}},ja=[];function L(t,e){const n=Ir(),r=Or({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===sn?void 0:sn].filter(i=>!!i)});t.common.issues.push(r)}class Re{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return F;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,l=await i.value;r.push({key:s,value:l})}return Re.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:l}=i;if(s.status==="aborted"||l.status==="aborted")return F;s.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[s.value]=l.value)}return{status:e.value,value:r}}}const F=Object.freeze({status:"aborted"}),nn=t=>({status:"dirty",value:t}),Pe=t=>({status:"valid",value:t}),_i=t=>t.status==="aborted",vi=t=>t.status==="dirty",Ln=t=>t.status==="valid",Dn=t=>typeof Promise<"u"&&t instanceof Promise;function Rr(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function ws(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var G;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));var Nn,In;class st{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const is=(t,e)=>{if(Ln(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ce(t.common.issues);return this._error=n,this._error}}};function z(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{var h,f;const{message:d}=t;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(h=d??r)!==null&&h!==void 0?h:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(f=d??n)!==null&&f!==void 0?f:u.defaultError}},description:i}}class W{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Rt(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Rt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Re,ctx:{common:e.parent.common,data:e.data,parsedType:Rt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rt(e)},s=this._parseSync({data:e,path:i.path,parent:i});return is(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rt(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Dn(i)?i:Promise.resolve(i));return is(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const l=e(i),u=()=>s.addIssue({code:O.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(h=>h?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Qe({schema:this,typeName:C.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return rt.create(this,this._def)}nullable(){return Mt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Je.create(this,this._def)}promise(){return an.create(this,this._def)}or(e){return Bn.create([this,e],this._def)}and(e){return Gn.create(this,e,this._def)}transform(e){return new Qe({...z(this._def),schema:this,typeName:C.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Zn({...z(this._def),innerType:this,defaultValue:n,typeName:C.ZodDefault})}brand(){return new xi({typeName:C.ZodBranded,type:this,...z(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Fn({...z(this._def),innerType:this,catchValue:n,typeName:C.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return zn.create(this,e)}readonly(){return jn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ka=/^c[^\s-]{8,}$/i,$a=/^[0-9a-z]+$/,Ya=/^[0-9A-HJKMNP-TV-Z]{26}$/,za=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wa=/^[a-z0-9_-]{21}$/i,Xa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ja=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qa="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oi;const el=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tl=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,nl=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ns="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rl=new RegExp(`^${Ns}$`);function Is(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function il(t){return new RegExp(`^${Is(t)}$`)}function Os(t){let e=`${Ns}T${Is(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function sl(t,e){return!!((e==="v4"||!e)&&el.test(t)||(e==="v6"||!e)&&tl.test(t))}class Xe extends W{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==D.string){const s=this._getOrReturnCtx(e);return L(s,{code:O.invalid_type,expected:D.string,received:s.parsedType}),F}const r=new Re;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:O.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:O.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const l=e.data.length>s.value,u=e.data.length<s.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?L(i,{code:O.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):u&&L(i,{code:O.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Ja.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"email",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")oi||(oi=new RegExp(Qa,"u")),oi.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"emoji",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")za.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"uuid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Wa.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"nanoid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Ka.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"cuid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")$a.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"cuid2",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Ya.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"ulid",code:O.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),L(i,{validation:"url",code:O.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"regex",code:O.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Os(s).test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?rl.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?il(s).test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:O.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Xa.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"duration",code:O.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?sl(e.data,s.version)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"ip",code:O.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?nl.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"base64",code:O.invalid_string,message:s.message}),r.dirty()):ne.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:O.invalid_string,...G.errToObj(r)})}_addCheck(e){return new Xe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...G.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...G.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...G.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...G.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...G.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...G.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...G.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...G.errToObj(n)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Xe.create=t=>{var e;return new Xe({checks:[],typeName:C.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...z(t)})};function ol(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return s%l/Math.pow(10,i)}class Lt extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==D.number){const s=this._getOrReturnCtx(e);return L(s,{code:O.invalid_type,expected:D.number,received:s.parsedType}),F}let r;const i=new Re;for(const s of this._def.checks)s.kind==="int"?ne.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),L(r,{code:O.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?ol(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),L(r,{code:O.not_finite,message:s.message}),i.dirty()):ne.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,i){return new Lt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(i)}]})}_addCheck(e){return new Lt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ne.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Lt.create=t=>new Lt({checks:[],typeName:C.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...z(t)});class Dt extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==D.bigint){const s=this._getOrReturnCtx(e);return L(s,{code:O.invalid_type,expected:D.bigint,received:s.parsedType}),F}let r;const i=new Re;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),L(r,{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ne.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,i){return new Dt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(i)}]})}_addCheck(e){return new Dt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Dt.create=t=>{var e;return new Dt({checks:[],typeName:C.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...z(t)})};class Pn extends W{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==D.boolean){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.boolean,received:r.parsedType}),F}return Pe(e.data)}}Pn.create=t=>new Pn({typeName:C.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...z(t)});class zt extends W{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==D.date){const s=this._getOrReturnCtx(e);return L(s,{code:O.invalid_type,expected:D.date,received:s.parsedType}),F}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return L(s,{code:O.invalid_date}),F}const r=new Re;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:O.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:O.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ne.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zt({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zt.create=t=>new zt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:C.ZodDate,...z(t)});class xr extends W{_parse(e){if(this._getType(e)!==D.symbol){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.symbol,received:r.parsedType}),F}return Pe(e.data)}}xr.create=t=>new xr({typeName:C.ZodSymbol,...z(t)});class Mn extends W{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.undefined,received:r.parsedType}),F}return Pe(e.data)}}Mn.create=t=>new Mn({typeName:C.ZodUndefined,...z(t)});class Un extends W{_parse(e){if(this._getType(e)!==D.null){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.null,received:r.parsedType}),F}return Pe(e.data)}}Un.create=t=>new Un({typeName:C.ZodNull,...z(t)});class on extends W{constructor(){super(...arguments),this._any=!0}_parse(e){return Pe(e.data)}}on.create=t=>new on({typeName:C.ZodAny,...z(t)});class $t extends W{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pe(e.data)}}$t.create=t=>new $t({typeName:C.ZodUnknown,...z(t)});class St extends W{_parse(e){const n=this._getOrReturnCtx(e);return L(n,{code:O.invalid_type,expected:D.never,received:n.parsedType}),F}}St.create=t=>new St({typeName:C.ZodNever,...z(t)});class kr extends W{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.void,received:r.parsedType}),F}return Pe(e.data)}}kr.create=t=>new kr({typeName:C.ZodVoid,...z(t)});class Je extends W{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==D.array)return L(n,{code:O.invalid_type,expected:D.array,received:n.parsedType}),F;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(l||u)&&(L(n,{code:l?O.too_big:O.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(L(n,{code:O.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(L(n,{code:O.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>i.type._parseAsync(new st(n,l,n.path,u)))).then(l=>Re.mergeArray(r,l));const s=[...n.data].map((l,u)=>i.type._parseSync(new st(n,l,n.path,u)));return Re.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Je({...this._def,minLength:{value:e,message:G.toString(n)}})}max(e,n){return new Je({...this._def,maxLength:{value:e,message:G.toString(n)}})}length(e,n){return new Je({...this._def,exactLength:{value:e,message:G.toString(n)}})}nonempty(e){return this.min(1,e)}}Je.create=(t,e)=>new Je({type:t,minLength:null,maxLength:null,exactLength:null,typeName:C.ZodArray,...z(e)});function tn(t){if(t instanceof he){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=rt.create(tn(r))}return new he({...t._def,shape:()=>e})}else return t instanceof Je?new Je({...t._def,type:tn(t.element)}):t instanceof rt?rt.create(tn(t.unwrap())):t instanceof Mt?Mt.create(tn(t.unwrap())):t instanceof ot?ot.create(t.items.map(e=>tn(e))):t}class he extends W{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ne.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==D.object){const f=this._getOrReturnCtx(e);return L(f,{code:O.invalid_type,expected:D.object,received:f.parsedType}),F}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof St&&this._def.unknownKeys==="strip"))for(const f in i.data)l.includes(f)||u.push(f);const h=[];for(const f of l){const d=s[f],m=i.data[f];h.push({key:{status:"valid",value:f},value:d._parse(new st(i,m,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof St){const f=this._def.unknownKeys;if(f==="passthrough")for(const d of u)h.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(f==="strict")u.length>0&&(L(i,{code:O.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const d of u){const m=i.data[d];h.push({key:{status:"valid",value:d},value:f._parse(new st(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const d of h){const m=await d.key,A=await d.value;f.push({key:m,value:A,alwaysSet:d.alwaysSet})}return f}).then(f=>Re.mergeObjectSync(r,f)):Re.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new he({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,l,u;const h=(l=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&l!==void 0?l:r.defaultError;return n.code==="unrecognized_keys"?{message:(u=G.errToObj(e).message)!==null&&u!==void 0?u:h}:{message:h}}}:{}})}strip(){return new he({...this._def,unknownKeys:"strip"})}passthrough(){return new he({...this._def,unknownKeys:"passthrough"})}extend(e){return new he({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new he({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:C.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new he({...this._def,catchall:e})}pick(e){const n={};return ne.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new he({...this._def,shape:()=>n})}omit(e){const n={};return ne.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new he({...this._def,shape:()=>n})}deepPartial(){return tn(this)}partial(e){const n={};return ne.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new he({...this._def,shape:()=>n})}required(e){const n={};return ne.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof rt;)s=s._def.innerType;n[r]=s}}),new he({...this._def,shape:()=>n})}keyof(){return Rs(ne.objectKeys(this.shape))}}he.create=(t,e)=>new he({shape:()=>t,unknownKeys:"strip",catchall:St.create(),typeName:C.ZodObject,...z(e)});he.strictCreate=(t,e)=>new he({shape:()=>t,unknownKeys:"strict",catchall:St.create(),typeName:C.ZodObject,...z(e)});he.lazycreate=(t,e)=>new he({shape:t,unknownKeys:"strip",catchall:St.create(),typeName:C.ZodObject,...z(e)});class Bn extends W{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const u of s)if(u.result.status==="valid")return u.result;for(const u of s)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=s.map(u=>new Ce(u.ctx.common.issues));return L(n,{code:O.invalid_union,unionErrors:l}),F}if(n.common.async)return Promise.all(r.map(async s=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let s;const l=[];for(const h of r){const f={...n,common:{...n.common,issues:[]},parent:null},d=h._parseSync({data:n.data,path:n.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const u=l.map(h=>new Ce(h));return L(n,{code:O.invalid_union,unionErrors:u}),F}}get options(){return this._def.options}}Bn.create=(t,e)=>new Bn({options:t,typeName:C.ZodUnion,...z(e)});const vt=t=>t instanceof Hn?vt(t.schema):t instanceof Qe?vt(t.innerType()):t instanceof qn?[t.value]:t instanceof Pt?t.options:t instanceof Cn?ne.objectValues(t.enum):t instanceof Zn?vt(t._def.innerType):t instanceof Mn?[void 0]:t instanceof Un?[null]:t instanceof rt?[void 0,...vt(t.unwrap())]:t instanceof Mt?[null,...vt(t.unwrap())]:t instanceof xi||t instanceof jn?vt(t.unwrap()):t instanceof Fn?vt(t._def.innerType):[];class Mr extends W{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.object)return L(n,{code:O.invalid_type,expected:D.object,received:n.parsedType}),F;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(L(n,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const l=vt(s.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,s)}}return new Mr({typeName:C.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...z(r)})}}function yi(t,e){const n=Rt(t),r=Rt(e);if(t===e)return{valid:!0,data:t};if(n===D.object&&r===D.object){const i=ne.objectKeys(e),s=ne.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of s){const h=yi(t[u],e[u]);if(!h.valid)return{valid:!1};l[u]=h.data}return{valid:!0,data:l}}else if(n===D.array&&r===D.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const l=t[s],u=e[s],h=yi(l,u);if(!h.valid)return{valid:!1};i.push(h.data)}return{valid:!0,data:i}}else return n===D.date&&r===D.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gn extends W{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,l)=>{if(_i(s)||_i(l))return F;const u=yi(s.value,l.value);return u.valid?((vi(s)||vi(l))&&n.dirty(),{status:n.value,value:u.data}):(L(r,{code:O.invalid_intersection_types}),F)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,l])=>i(s,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Gn.create=(t,e,n)=>new Gn({left:t,right:e,typeName:C.ZodIntersection,...z(n)});class ot extends W{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.array)return L(r,{code:O.invalid_type,expected:D.array,received:r.parsedType}),F;if(r.data.length<this._def.items.length)return L(r,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&r.data.length>this._def.items.length&&(L(r,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((l,u)=>{const h=this._def.items[u]||this._def.rest;return h?h._parse(new st(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(s).then(l=>Re.mergeArray(n,l)):Re.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ot({...this._def,rest:e})}}ot.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ot({items:t,typeName:C.ZodTuple,rest:null,...z(e)})};class Vn extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.object)return L(r,{code:O.invalid_type,expected:D.object,received:r.parsedType}),F;const i=[],s=this._def.keyType,l=this._def.valueType;for(const u in r.data)i.push({key:s._parse(new st(r,u,r.path,u)),value:l._parse(new st(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Re.mergeObjectAsync(n,i):Re.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof W?new Vn({keyType:e,valueType:n,typeName:C.ZodRecord,...z(r)}):new Vn({keyType:Xe.create(),valueType:e,typeName:C.ZodRecord,...z(n)})}}class Lr extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.map)return L(r,{code:O.invalid_type,expected:D.map,received:r.parsedType}),F;const i=this._def.keyType,s=this._def.valueType,l=[...r.data.entries()].map(([u,h],f)=>({key:i._parse(new st(r,u,r.path,[f,"key"])),value:s._parse(new st(r,h,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const h of l){const f=await h.key,d=await h.value;if(f.status==="aborted"||d.status==="aborted")return F;(f.status==="dirty"||d.status==="dirty")&&n.dirty(),u.set(f.value,d.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const h of l){const f=h.key,d=h.value;if(f.status==="aborted"||d.status==="aborted")return F;(f.status==="dirty"||d.status==="dirty")&&n.dirty(),u.set(f.value,d.value)}return{status:n.value,value:u}}}}Lr.create=(t,e,n)=>new Lr({valueType:e,keyType:t,typeName:C.ZodMap,...z(n)});class Wt extends W{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.set)return L(r,{code:O.invalid_type,expected:D.set,received:r.parsedType}),F;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(L(r,{code:O.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(L(r,{code:O.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function l(h){const f=new Set;for(const d of h){if(d.status==="aborted")return F;d.status==="dirty"&&n.dirty(),f.add(d.value)}return{status:n.value,value:f}}const u=[...r.data.values()].map((h,f)=>s._parse(new st(r,h,r.path,f)));return r.common.async?Promise.all(u).then(h=>l(h)):l(u)}min(e,n){return new Wt({...this._def,minSize:{value:e,message:G.toString(n)}})}max(e,n){return new Wt({...this._def,maxSize:{value:e,message:G.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Wt.create=(t,e)=>new Wt({valueType:t,minSize:null,maxSize:null,typeName:C.ZodSet,...z(e)});class rn extends W{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.function)return L(n,{code:O.invalid_type,expected:D.function,received:n.parsedType}),F;function r(u,h){return Or({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ir(),sn].filter(f=>!!f),issueData:{code:O.invalid_arguments,argumentsError:h}})}function i(u,h){return Or({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ir(),sn].filter(f=>!!f),issueData:{code:O.invalid_return_type,returnTypeError:h}})}const s={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof an){const u=this;return Pe(async function(...h){const f=new Ce([]),d=await u._def.args.parseAsync(h,s).catch(P=>{throw f.addIssue(r(h,P)),f}),m=await Reflect.apply(l,this,d);return await u._def.returns._def.type.parseAsync(m,s).catch(P=>{throw f.addIssue(i(m,P)),f})})}else{const u=this;return Pe(function(...h){const f=u._def.args.safeParse(h,s);if(!f.success)throw new Ce([r(h,f.error)]);const d=Reflect.apply(l,this,f.data),m=u._def.returns.safeParse(d,s);if(!m.success)throw new Ce([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rn({...this._def,args:ot.create(e).rest($t.create())})}returns(e){return new rn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new rn({args:e||ot.create([]).rest($t.create()),returns:n||$t.create(),typeName:C.ZodFunction,...z(r)})}}class Hn extends W{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Hn.create=(t,e)=>new Hn({getter:t,typeName:C.ZodLazy,...z(e)});class qn extends W{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return L(n,{received:n.data,code:O.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:e.data}}get value(){return this._def.value}}qn.create=(t,e)=>new qn({value:t,typeName:C.ZodLiteral,...z(e)});function Rs(t,e){return new Pt({values:t,typeName:C.ZodEnum,...z(e)})}class Pt extends W{constructor(){super(...arguments),Nn.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return L(n,{expected:ne.joinValues(r),received:n.parsedType,code:O.invalid_type}),F}if(Rr(this,Nn)||ws(this,Nn,new Set(this._def.values)),!Rr(this,Nn).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return L(n,{received:n.data,code:O.invalid_enum_value,options:r}),F}return Pe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Pt.create(e,{...this._def,...n})}exclude(e,n=this._def){return Pt.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Nn=new WeakMap;Pt.create=Rs;class Cn extends W{constructor(){super(...arguments),In.set(this,void 0)}_parse(e){const n=ne.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==D.string&&r.parsedType!==D.number){const i=ne.objectValues(n);return L(r,{expected:ne.joinValues(i),received:r.parsedType,code:O.invalid_type}),F}if(Rr(this,In)||ws(this,In,new Set(ne.getValidEnumValues(this._def.values))),!Rr(this,In).has(e.data)){const i=ne.objectValues(n);return L(r,{received:r.data,code:O.invalid_enum_value,options:i}),F}return Pe(e.data)}get enum(){return this._def.values}}In=new WeakMap;Cn.create=(t,e)=>new Cn({values:t,typeName:C.ZodNativeEnum,...z(e)});class an extends W{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.promise&&n.common.async===!1)return L(n,{code:O.invalid_type,expected:D.promise,received:n.parsedType}),F;const r=n.parsedType===D.promise?n.data:Promise.resolve(n.data);return Pe(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}an.create=(t,e)=>new an({type:t,typeName:C.ZodPromise,...z(e)});class Qe extends W{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===C.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:l=>{L(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const l=i.transform(r.data,s);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return F;const h=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return h.status==="aborted"?F:h.status==="dirty"||n.value==="dirty"?nn(h.value):h});{if(n.value==="aborted")return F;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?F:u.status==="dirty"||n.value==="dirty"?nn(u.value):u}}if(i.type==="refinement"){const l=u=>{const h=i.refinement(u,s);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?F:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?F:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ln(l))return l;const u=i.transform(l.value,s);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Ln(l)?Promise.resolve(i.transform(l.value,s)).then(u=>({status:n.value,value:u})):l);ne.assertNever(i)}}Qe.create=(t,e,n)=>new Qe({schema:t,typeName:C.ZodEffects,effect:e,...z(n)});Qe.createWithPreprocess=(t,e,n)=>new Qe({schema:e,effect:{type:"preprocess",transform:t},typeName:C.ZodEffects,...z(n)});class rt extends W{_parse(e){return this._getType(e)===D.undefined?Pe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rt.create=(t,e)=>new rt({innerType:t,typeName:C.ZodOptional,...z(e)});class Mt extends W{_parse(e){return this._getType(e)===D.null?Pe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mt.create=(t,e)=>new Mt({innerType:t,typeName:C.ZodNullable,...z(e)});class Zn extends W{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===D.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Zn.create=(t,e)=>new Zn({innerType:t,typeName:C.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...z(e)});class Fn extends W{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Dn(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Fn.create=(t,e)=>new Fn({innerType:t,typeName:C.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...z(e)});class Dr extends W{_parse(e){if(this._getType(e)!==D.nan){const r=this._getOrReturnCtx(e);return L(r,{code:O.invalid_type,expected:D.nan,received:r.parsedType}),F}return{status:"valid",value:e.data}}}Dr.create=t=>new Dr({typeName:C.ZodNaN,...z(t)});const al=Symbol("zod_brand");class xi extends W{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class zn extends W{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?F:s.status==="dirty"?(n.dirty(),nn(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?F:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new zn({in:e,out:n,typeName:C.ZodPipeline})}}class jn extends W{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Ln(i)&&(i.value=Object.freeze(i.value)),i);return Dn(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}jn.create=(t,e)=>new jn({innerType:t,typeName:C.ZodReadonly,...z(e)});function ki(t,e={},n){return t?on.create().superRefine((r,i)=>{var s,l;if(!t(r)){const u=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,h=(l=(s=u.fatal)!==null&&s!==void 0?s:n)!==null&&l!==void 0?l:!0,f=typeof u=="string"?{message:u}:u;i.addIssue({code:"custom",...f,fatal:h})}}):on.create()}const ll={object:he.lazycreate};var C;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(C||(C={}));const cl=(t,e={message:`Input not instance of ${t.name}`})=>ki(n=>n instanceof t,e),v=Xe.create,V=Lt.create,ul=Dr.create,xs=Dt.create,K=Pn.create,dl=zt.create,fl=xr.create,hl=Mn.create,Ur=Un.create,pl=on.create,Kn=$t.create,gl=St.create,ml=kr.create,te=Je.create,x=he.create,_l=he.strictCreate,Li=Bn.create,vl=Mr.create,yl=Gn.create,El=ot.create,bl=Vn.create,Tl=Lr.create,Sl=Wt.create,Al=rn.create,wl=Hn.create,_e=qn.create,Nl=Pt.create,cn=Cn.create,Il=an.create,ss=Qe.create,ks=rt.create,Ol=Mt.create,Ls=Qe.createWithPreprocess,Rl=zn.create,xl=()=>v().optional(),kl=()=>V().optional(),Ll=()=>K().optional(),Dl={string:t=>Xe.create({...t,coerce:!0}),number:t=>Lt.create({...t,coerce:!0}),boolean:t=>Pn.create({...t,coerce:!0}),bigint:t=>Dt.create({...t,coerce:!0}),date:t=>zt.create({...t,coerce:!0})},Pl=F;var _=Object.freeze({__proto__:null,defaultErrorMap:sn,setErrorMap:Fa,getErrorMap:Ir,makeIssue:Or,EMPTY_PATH:ja,addIssueToContext:L,ParseStatus:Re,INVALID:F,DIRTY:nn,OK:Pe,isAborted:_i,isDirty:vi,isValid:Ln,isAsync:Dn,get util(){return ne},get objectUtil(){return mi},ZodParsedType:D,getParsedType:Rt,ZodType:W,datetimeRegex:Os,ZodString:Xe,ZodNumber:Lt,ZodBigInt:Dt,ZodBoolean:Pn,ZodDate:zt,ZodSymbol:xr,ZodUndefined:Mn,ZodNull:Un,ZodAny:on,ZodUnknown:$t,ZodNever:St,ZodVoid:kr,ZodArray:Je,ZodObject:he,ZodUnion:Bn,ZodDiscriminatedUnion:Mr,ZodIntersection:Gn,ZodTuple:ot,ZodRecord:Vn,ZodMap:Lr,ZodSet:Wt,ZodFunction:rn,ZodLazy:Hn,ZodLiteral:qn,ZodEnum:Pt,ZodNativeEnum:Cn,ZodPromise:an,ZodEffects:Qe,ZodTransformer:Qe,ZodOptional:rt,ZodNullable:Mt,ZodDefault:Zn,ZodCatch:Fn,ZodNaN:Dr,BRAND:al,ZodBranded:xi,ZodPipeline:zn,ZodReadonly:jn,custom:ki,Schema:W,ZodSchema:W,late:ll,get ZodFirstPartyTypeKind(){return C},coerce:Dl,any:pl,array:te,bigint:xs,boolean:K,date:dl,discriminatedUnion:vl,effect:ss,enum:Nl,function:Al,instanceof:cl,intersection:yl,lazy:wl,literal:_e,map:Tl,nan:ul,nativeEnum:cn,never:gl,null:Ur,nullable:Ol,number:V,object:x,oboolean:Ll,onumber:kl,optional:ks,ostring:xl,pipeline:Rl,preprocess:Ls,promise:Il,record:bl,set:Sl,strictObject:_l,string:v,symbol:fl,transformer:ss,tuple:El,undefined:hl,union:Li,unknown:Kn,void:ml,NEVER:Pl,ZodIssueCode:O,quotelessJson:Za,ZodError:Ce}),ai={exports:{}},os;function Ml(){return os||(os=1,function(t){var e=function(n){var r=1e7,i=7,s=9007199254740992,l=X(s),u="0123456789abcdefghijklmnopqrstuvwxyz",h=typeof BigInt=="function";function f(o,c,g,y){return typeof o>"u"?f[0]:typeof c<"u"?+c==10&&!g?Z(o):$r(o,c,g,y):Z(o)}function d(o,c){this.value=o,this.sign=c,this.isSmall=!1}d.prototype=Object.create(f.prototype);function m(o){this.value=o,this.sign=o<0,this.isSmall=!0}m.prototype=Object.create(f.prototype);function A(o){this.value=o}A.prototype=Object.create(f.prototype);function P(o){return-9007199254740992<o&&o<s}function X(o){return o<1e7?[o]:o<1e14?[o%1e7,Math.floor(o/1e7)]:[o%1e7,Math.floor(o/1e7)%1e7,Math.floor(o/1e14)]}function H(o){k(o);var c=o.length;if(c<4&&dt(o,l)<0)switch(c){case 0:return 0;case 1:return o[0];case 2:return o[0]+o[1]*r;default:return o[0]+(o[1]+o[2]*r)*r}return o}function k(o){for(var c=o.length;o[--c]===0;);o.length=c+1}function ue(o){for(var c=new Array(o),g=-1;++g<o;)c[g]=0;return c}function ae(o){return o>0?Math.floor(o):Math.ceil(o)}function se(o,c){var g=o.length,y=c.length,T=new Array(g),b=0,N=r,w,I;for(I=0;I<y;I++)w=o[I]+c[I]+b,b=w>=N?1:0,T[I]=w-b*N;for(;I<g;)w=o[I]+b,b=w===N?1:0,T[I++]=w-b*N;return b>0&&T.push(b),T}function Se(o,c){return o.length>=c.length?se(o,c):se(c,o)}function be(o,c){var g=o.length,y=new Array(g),T=r,b,N;for(N=0;N<g;N++)b=o[N]-T+c,c=Math.floor(b/T),y[N]=b-c*T,c+=1;for(;c>0;)y[N++]=c%T,c=Math.floor(c/T);return y}d.prototype.add=function(o){var c=Z(o);if(this.sign!==c.sign)return this.subtract(c.negate());var g=this.value,y=c.value;return c.isSmall?new d(be(g,Math.abs(y)),this.sign):new d(Se(g,y),this.sign)},d.prototype.plus=d.prototype.add,m.prototype.add=function(o){var c=Z(o),g=this.value;if(g<0!==c.sign)return this.subtract(c.negate());var y=c.value;if(c.isSmall){if(P(g+y))return new m(g+y);y=X(Math.abs(y))}return new d(be(y,Math.abs(g)),g<0)},m.prototype.plus=m.prototype.add,A.prototype.add=function(o){return new A(this.value+Z(o).value)},A.prototype.plus=A.prototype.add;function Ze(o,c){var g=o.length,y=c.length,T=new Array(g),b=0,N=r,w,I;for(w=0;w<y;w++)I=o[w]-b-c[w],I<0?(I+=N,b=1):b=0,T[w]=I;for(w=y;w<g;w++){if(I=o[w]-b,I<0)I+=N;else{T[w++]=I;break}T[w]=I}for(;w<g;w++)T[w]=o[w];return k(T),T}function Ae(o,c,g){var y;return dt(o,c)>=0?y=Ze(o,c):(y=Ze(c,o),g=!g),y=H(y),typeof y=="number"?(g&&(y=-y),new m(y)):new d(y,g)}function Fe(o,c,g){var y=o.length,T=new Array(y),b=-c,N=r,w,I;for(w=0;w<y;w++)I=o[w]+b,b=Math.floor(I/N),I%=N,T[w]=I<0?I+N:I;return T=H(T),typeof T=="number"?(g&&(T=-T),new m(T)):new d(T,g)}d.prototype.subtract=function(o){var c=Z(o);if(this.sign!==c.sign)return this.add(c.negate());var g=this.value,y=c.value;return c.isSmall?Fe(g,Math.abs(y),this.sign):Ae(g,y,this.sign)},d.prototype.minus=d.prototype.subtract,m.prototype.subtract=function(o){var c=Z(o),g=this.value;if(g<0!==c.sign)return this.add(c.negate());var y=c.value;return c.isSmall?new m(g-y):Fe(y,Math.abs(g),g>=0)},m.prototype.minus=m.prototype.subtract,A.prototype.subtract=function(o){return new A(this.value-Z(o).value)},A.prototype.minus=A.prototype.subtract,d.prototype.negate=function(){return new d(this.value,!this.sign)},m.prototype.negate=function(){var o=this.sign,c=new m(-this.value);return c.sign=!o,c},A.prototype.negate=function(){return new A(-this.value)},d.prototype.abs=function(){return new d(this.value,!1)},m.prototype.abs=function(){return new m(Math.abs(this.value))},A.prototype.abs=function(){return new A(this.value>=0?this.value:-this.value)};function Ve(o,c){var g=o.length,y=c.length,T=g+y,b=ue(T),N=r,w,I,j,J,$;for(j=0;j<g;++j){J=o[j];for(var ie=0;ie<y;++ie)$=c[ie],w=J*$+b[j+ie],I=Math.floor(w/N),b[j+ie]=w-I*N,b[j+ie+1]+=I}return k(b),b}function ct(o,c){var g=o.length,y=new Array(g),T=r,b=0,N,w;for(w=0;w<g;w++)N=o[w]*c+b,b=Math.floor(N/T),y[w]=N-b*T;for(;b>0;)y[w++]=b%T,b=Math.floor(b/T);return y}function ke(o,c){for(var g=[];c-- >0;)g.push(0);return g.concat(o)}function le(o,c){var g=Math.max(o.length,c.length);if(g<=30)return Ve(o,c);g=Math.ceil(g/2);var y=o.slice(g),T=o.slice(0,g),b=c.slice(g),N=c.slice(0,g),w=le(T,N),I=le(y,b),j=le(Se(T,y),Se(N,b)),J=Se(Se(w,ke(Ze(Ze(j,w),I),g)),ke(I,2*g));return k(J),J}function Zr(o,c){return-.012*o-.012*c+15e-6*o*c>0}d.prototype.multiply=function(o){var c=Z(o),g=this.value,y=c.value,T=this.sign!==c.sign,b;if(c.isSmall){if(y===0)return f[0];if(y===1)return this;if(y===-1)return this.negate();if(b=Math.abs(y),b<r)return new d(ct(g,b),T);y=X(b)}return Zr(g.length,y.length)?new d(le(g,y),T):new d(Ve(g,y),T)},d.prototype.times=d.prototype.multiply;function Wn(o,c,g){return o<r?new d(ct(c,o),g):new d(Ve(c,X(o)),g)}m.prototype._multiplyBySmall=function(o){return P(o.value*this.value)?new m(o.value*this.value):Wn(Math.abs(o.value),X(Math.abs(this.value)),this.sign!==o.sign)},d.prototype._multiplyBySmall=function(o){return o.value===0?f[0]:o.value===1?this:o.value===-1?this.negate():Wn(Math.abs(o.value),this.value,this.sign!==o.sign)},m.prototype.multiply=function(o){return Z(o)._multiplyBySmall(this)},m.prototype.times=m.prototype.multiply,A.prototype.multiply=function(o){return new A(this.value*Z(o).value)},A.prototype.times=A.prototype.multiply;function Xn(o){var c=o.length,g=ue(c+c),y=r,T,b,N,w,I;for(N=0;N<c;N++){w=o[N],b=0-w*w;for(var j=N;j<c;j++)I=o[j],T=2*(w*I)+g[N+j]+b,b=Math.floor(T/y),g[N+j]=T-b*y;g[N+c]=b}return k(g),g}d.prototype.square=function(){return new d(Xn(this.value),!1)},m.prototype.square=function(){var o=this.value*this.value;return P(o)?new m(o):new d(Xn(X(Math.abs(this.value))),!1)},A.prototype.square=function(o){return new A(this.value*this.value)};function Fr(o,c){var g=o.length,y=c.length,T=r,b=ue(c.length),N=c[y-1],w=Math.ceil(T/(2*N)),I=ct(o,w),j=ct(c,w),J,$,ie,Le,Ie,En,bn;for(I.length<=g&&I.push(0),j.push(0),N=j[y-1],$=g-y;$>=0;$--){for(J=T-1,I[$+y]!==N&&(J=Math.floor((I[$+y]*T+I[$+y-1])/N)),ie=0,Le=0,En=j.length,Ie=0;Ie<En;Ie++)ie+=J*j[Ie],bn=Math.floor(ie/T),Le+=I[$+Ie]-(ie-bn*T),ie=bn,Le<0?(I[$+Ie]=Le+T,Le=-1):(I[$+Ie]=Le,Le=0);for(;Le!==0;){for(J-=1,ie=0,Ie=0;Ie<En;Ie++)ie+=I[$+Ie]-T+j[Ie],ie<0?(I[$+Ie]=ie+T,ie=0):(I[$+Ie]=ie,ie=1);Le+=ie}b[$]=J}return I=Jn(I,w)[0],[H(b),H(I)]}function jr(o,c){for(var g=o.length,y=c.length,T=[],b=[],N=r,w,I,j,J,$;g;){if(b.unshift(o[--g]),k(b),dt(b,c)<0){T.push(0);continue}I=b.length,j=b[I-1]*N+b[I-2],J=c[y-1]*N+c[y-2],I>y&&(j=(j+1)*N),w=Math.ceil(j/J);do{if($=ct(c,w),dt($,b)<=0)break;w--}while(w);T.push(w),b=Ze(b,$)}return T.reverse(),[H(T),H(b)]}function Jn(o,c){var g=o.length,y=ue(g),T=r,b,N,w,I;for(w=0,b=g-1;b>=0;--b)I=w*T+o[b],N=ae(I/c),w=I-N*c,y[b]=N|0;return[y,w|0]}function ut(o,c){var g,y=Z(c);if(h)return[new A(o.value/y.value),new A(o.value%y.value)];var T=o.value,b=y.value,N;if(b===0)throw new Error("Cannot divide by zero");if(o.isSmall)return y.isSmall?[new m(ae(T/b)),new m(T%b)]:[f[0],o];if(y.isSmall){if(b===1)return[o,f[0]];if(b==-1)return[o.negate(),f[0]];var w=Math.abs(b);if(w<r){g=Jn(T,w),N=H(g[0]);var I=g[1];return o.sign&&(I=-I),typeof N=="number"?(o.sign!==y.sign&&(N=-N),[new m(N),new m(I)]):[new d(N,o.sign!==y.sign),new m(I)]}b=X(w)}var j=dt(T,b);if(j===-1)return[f[0],o];if(j===0)return[f[o.sign===y.sign?1:-1],f[0]];T.length+b.length<=200?g=Fr(T,b):g=jr(T,b),N=g[0];var J=o.sign!==y.sign,$=g[1],ie=o.sign;return typeof N=="number"?(J&&(N=-N),N=new m(N)):N=new d(N,J),typeof $=="number"?(ie&&($=-$),$=new m($)):$=new d($,ie),[N,$]}d.prototype.divmod=function(o){var c=ut(this,o);return{quotient:c[0],remainder:c[1]}},A.prototype.divmod=m.prototype.divmod=d.prototype.divmod,d.prototype.divide=function(o){return ut(this,o)[0]},A.prototype.over=A.prototype.divide=function(o){return new A(this.value/Z(o).value)},m.prototype.over=m.prototype.divide=d.prototype.over=d.prototype.divide,d.prototype.mod=function(o){return ut(this,o)[1]},A.prototype.mod=A.prototype.remainder=function(o){return new A(this.value%Z(o).value)},m.prototype.remainder=m.prototype.mod=d.prototype.remainder=d.prototype.mod,d.prototype.pow=function(o){var c=Z(o),g=this.value,y=c.value,T,b,N;if(y===0)return f[1];if(g===0)return f[0];if(g===1)return f[1];if(g===-1)return c.isEven()?f[1]:f[-1];if(c.sign)return f[0];if(!c.isSmall)throw new Error("The exponent "+c.toString()+" is too large.");if(this.isSmall&&P(T=Math.pow(g,y)))return new m(ae(T));for(b=this,N=f[1];y&!0&&(N=N.times(b),--y),y!==0;)y/=2,b=b.square();return N},m.prototype.pow=d.prototype.pow,A.prototype.pow=function(o){var c=Z(o),g=this.value,y=c.value,T=BigInt(0),b=BigInt(1),N=BigInt(2);if(y===T)return f[1];if(g===T)return f[0];if(g===b)return f[1];if(g===BigInt(-1))return c.isEven()?f[1]:f[-1];if(c.isNegative())return new A(T);for(var w=this,I=f[1];(y&b)===b&&(I=I.times(w),--y),y!==T;)y/=N,w=w.square();return I},d.prototype.modPow=function(o,c){if(o=Z(o),c=Z(c),c.isZero())throw new Error("Cannot take modPow with modulus 0");var g=f[1],y=this.mod(c);for(o.isNegative()&&(o=o.multiply(f[-1]),y=y.modInv(c));o.isPositive();){if(y.isZero())return f[0];o.isOdd()&&(g=g.multiply(y).mod(c)),o=o.divide(2),y=y.square().mod(c)}return g},A.prototype.modPow=m.prototype.modPow=d.prototype.modPow;function dt(o,c){if(o.length!==c.length)return o.length>c.length?1:-1;for(var g=o.length-1;g>=0;g--)if(o[g]!==c[g])return o[g]>c[g]?1:-1;return 0}d.prototype.compareAbs=function(o){var c=Z(o),g=this.value,y=c.value;return c.isSmall?1:dt(g,y)},m.prototype.compareAbs=function(o){var c=Z(o),g=Math.abs(this.value),y=c.value;return c.isSmall?(y=Math.abs(y),g===y?0:g>y?1:-1):-1},A.prototype.compareAbs=function(o){var c=this.value,g=Z(o).value;return c=c>=0?c:-c,g=g>=0?g:-g,c===g?0:c>g?1:-1},d.prototype.compare=function(o){if(o===1/0)return-1;if(o===-1/0)return 1;var c=Z(o),g=this.value,y=c.value;return this.sign!==c.sign?c.sign?1:-1:c.isSmall?this.sign?-1:1:dt(g,y)*(this.sign?-1:1)},d.prototype.compareTo=d.prototype.compare,m.prototype.compare=function(o){if(o===1/0)return-1;if(o===-1/0)return 1;var c=Z(o),g=this.value,y=c.value;return c.isSmall?g==y?0:g>y?1:-1:g<0!==c.sign?g<0?-1:1:g<0?1:-1},m.prototype.compareTo=m.prototype.compare,A.prototype.compare=function(o){if(o===1/0)return-1;if(o===-1/0)return 1;var c=this.value,g=Z(o).value;return c===g?0:c>g?1:-1},A.prototype.compareTo=A.prototype.compare,d.prototype.equals=function(o){return this.compare(o)===0},A.prototype.eq=A.prototype.equals=m.prototype.eq=m.prototype.equals=d.prototype.eq=d.prototype.equals,d.prototype.notEquals=function(o){return this.compare(o)!==0},A.prototype.neq=A.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=d.prototype.neq=d.prototype.notEquals,d.prototype.greater=function(o){return this.compare(o)>0},A.prototype.gt=A.prototype.greater=m.prototype.gt=m.prototype.greater=d.prototype.gt=d.prototype.greater,d.prototype.lesser=function(o){return this.compare(o)<0},A.prototype.lt=A.prototype.lesser=m.prototype.lt=m.prototype.lesser=d.prototype.lt=d.prototype.lesser,d.prototype.greaterOrEquals=function(o){return this.compare(o)>=0},A.prototype.geq=A.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=d.prototype.geq=d.prototype.greaterOrEquals,d.prototype.lesserOrEquals=function(o){return this.compare(o)<=0},A.prototype.leq=A.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=d.prototype.leq=d.prototype.lesserOrEquals,d.prototype.isEven=function(){return(this.value[0]&1)===0},m.prototype.isEven=function(){return(this.value&1)===0},A.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},d.prototype.isOdd=function(){return(this.value[0]&1)===1},m.prototype.isOdd=function(){return(this.value&1)===1},A.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},d.prototype.isPositive=function(){return!this.sign},m.prototype.isPositive=function(){return this.value>0},A.prototype.isPositive=m.prototype.isPositive,d.prototype.isNegative=function(){return this.sign},m.prototype.isNegative=function(){return this.value<0},A.prototype.isNegative=m.prototype.isNegative,d.prototype.isUnit=function(){return!1},m.prototype.isUnit=function(){return Math.abs(this.value)===1},A.prototype.isUnit=function(){return this.abs().value===BigInt(1)},d.prototype.isZero=function(){return!1},m.prototype.isZero=function(){return this.value===0},A.prototype.isZero=function(){return this.value===BigInt(0)},d.prototype.isDivisibleBy=function(o){var c=Z(o);return c.isZero()?!1:c.isUnit()?!0:c.compareAbs(2)===0?this.isEven():this.mod(c).isZero()},A.prototype.isDivisibleBy=m.prototype.isDivisibleBy=d.prototype.isDivisibleBy;function Qn(o){var c=o.abs();if(c.isUnit())return!1;if(c.equals(2)||c.equals(3)||c.equals(5))return!0;if(c.isEven()||c.isDivisibleBy(3)||c.isDivisibleBy(5))return!1;if(c.lesser(49))return!0}function pn(o,c){for(var g=o.prev(),y=g,T=0,b,N,w;y.isEven();)y=y.divide(2),T++;e:for(N=0;N<c.length;N++)if(!o.lesser(c[N])&&(w=e(c[N]).modPow(y,o),!(w.isUnit()||w.equals(g)))){for(b=T-1;b!=0;b--){if(w=w.square().mod(o),w.isUnit())return!1;if(w.equals(g))continue e}return!1}return!0}d.prototype.isPrime=function(o){var c=Qn(this);if(c!==n)return c;var g=this.abs(),y=g.bitLength();if(y<=64)return pn(g,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var T=Math.log(2)*y.toJSNumber(),b=Math.ceil(o===!0?2*Math.pow(T,2):T),N=[],w=0;w<b;w++)N.push(e(w+2));return pn(g,N)},A.prototype.isPrime=m.prototype.isPrime=d.prototype.isPrime,d.prototype.isProbablePrime=function(o,c){var g=Qn(this);if(g!==n)return g;for(var y=this.abs(),T=o===n?5:o,b=[],N=0;N<T;N++)b.push(e.randBetween(2,y.minus(2),c));return pn(y,b)},A.prototype.isProbablePrime=m.prototype.isProbablePrime=d.prototype.isProbablePrime,d.prototype.modInv=function(o){for(var c=e.zero,g=e.one,y=Z(o),T=this.abs(),b,N,w;!T.isZero();)b=y.divide(T),N=c,w=y,c=g,y=T,g=N.subtract(b.multiply(g)),T=w.subtract(b.multiply(T));if(!y.isUnit())throw new Error(this.toString()+" and "+o.toString()+" are not co-prime");return c.compare(0)===-1&&(c=c.add(o)),this.isNegative()?c.negate():c},A.prototype.modInv=m.prototype.modInv=d.prototype.modInv,d.prototype.next=function(){var o=this.value;return this.sign?Fe(o,1,this.sign):new d(be(o,1),this.sign)},m.prototype.next=function(){var o=this.value;return o+1<s?new m(o+1):new d(l,!1)},A.prototype.next=function(){return new A(this.value+BigInt(1))},d.prototype.prev=function(){var o=this.value;return this.sign?new d(be(o,1),!0):Fe(o,1,this.sign)},m.prototype.prev=function(){var o=this.value;return o-1>-9007199254740992?new m(o-1):new d(l,!0)},A.prototype.prev=function(){return new A(this.value-BigInt(1))};for(var ze=[1];2*ze[ze.length-1]<=r;)ze.push(2*ze[ze.length-1]);var Vt=ze.length,ft=ze[Vt-1];function er(o){return Math.abs(o)<=r}d.prototype.shiftLeft=function(o){var c=Z(o).toJSNumber();if(!er(c))throw new Error(String(c)+" is too large for shifting.");if(c<0)return this.shiftRight(-c);var g=this;if(g.isZero())return g;for(;c>=Vt;)g=g.multiply(ft),c-=Vt-1;return g.multiply(ze[c])},A.prototype.shiftLeft=m.prototype.shiftLeft=d.prototype.shiftLeft,d.prototype.shiftRight=function(o){var c,g=Z(o).toJSNumber();if(!er(g))throw new Error(String(g)+" is too large for shifting.");if(g<0)return this.shiftLeft(-g);for(var y=this;g>=Vt;){if(y.isZero()||y.isNegative()&&y.isUnit())return y;c=ut(y,ft),y=c[1].isNegative()?c[0].prev():c[0],g-=Vt-1}return c=ut(y,ze[g]),c[1].isNegative()?c[0].prev():c[0]},A.prototype.shiftRight=m.prototype.shiftRight=d.prototype.shiftRight;function oe(o,c,g){c=Z(c);for(var y=o.isNegative(),T=c.isNegative(),b=y?o.not():o,N=T?c.not():c,w=0,I=0,j=null,J=null,$=[];!b.isZero()||!N.isZero();)j=ut(b,ft),w=j[1].toJSNumber(),y&&(w=ft-1-w),J=ut(N,ft),I=J[1].toJSNumber(),T&&(I=ft-1-I),b=j[0],N=J[0],$.push(g(w,I));for(var ie=g(y?1:0,T?1:0)!==0?e(-1):e(0),Le=$.length-1;Le>=0;Le-=1)ie=ie.multiply(ft).add(e($[Le]));return ie}d.prototype.not=function(){return this.negate().prev()},A.prototype.not=m.prototype.not=d.prototype.not,d.prototype.and=function(o){return oe(this,o,function(c,g){return c&g})},A.prototype.and=m.prototype.and=d.prototype.and,d.prototype.or=function(o){return oe(this,o,function(c,g){return c|g})},A.prototype.or=m.prototype.or=d.prototype.or,d.prototype.xor=function(o){return oe(this,o,function(c,g){return c^g})},A.prototype.xor=m.prototype.xor=d.prototype.xor;var Jt=1<<30,Kr=(r&-1e7)*(r&-1e7)|Jt;function He(o){var c=o.value,g=typeof c=="number"?c|Jt:typeof c=="bigint"?c|BigInt(Jt):c[0]+c[1]*r|Kr;return g&-g}function gn(o,c){if(c.compareTo(o)<=0){var g=gn(o,c.square(c)),y=g.p,T=g.e,b=y.multiply(c);return b.compareTo(o)<=0?{p:b,e:T*2+1}:{p:y,e:T*2}}return{p:e(1),e:0}}d.prototype.bitLength=function(){var o=this;return o.compareTo(e(0))<0&&(o=o.negate().subtract(e(1))),o.compareTo(e(0))===0?e(0):e(gn(o,e(2)).e).add(e(1))},A.prototype.bitLength=m.prototype.bitLength=d.prototype.bitLength;function mn(o,c){return o=Z(o),c=Z(c),o.greater(c)?o:c}function _n(o,c){return o=Z(o),c=Z(c),o.lesser(c)?o:c}function vn(o,c){if(o=Z(o).abs(),c=Z(c).abs(),o.equals(c))return o;if(o.isZero())return c;if(c.isZero())return o;for(var g=f[1],y,T;o.isEven()&&c.isEven();)y=_n(He(o),He(c)),o=o.divide(y),c=c.divide(y),g=g.multiply(y);for(;o.isEven();)o=o.divide(He(o));do{for(;c.isEven();)c=c.divide(He(c));o.greater(c)&&(T=c,c=o,o=T),c=c.subtract(o)}while(!c.isZero());return g.isUnit()?o:o.multiply(g)}function tr(o,c){return o=Z(o).abs(),c=Z(c).abs(),o.divide(vn(o,c)).multiply(c)}function nr(o,c,g){o=Z(o),c=Z(c);var y=g||Math.random,T=_n(o,c),b=mn(o,c),N=b.subtract(T).add(1);if(N.isSmall)return T.add(Math.floor(y()*N));for(var w=Ht(N,r).value,I=[],j=!0,J=0;J<w.length;J++){var $=j?w[J]+(J+1<w.length?w[J+1]/r:0):r,ie=ae(y()*$);I.push(ie),ie<w[J]&&(j=!1)}return T.add(f.fromArray(I,r,!1))}var $r=function(o,c,g,y){g=g||u,o=String(o),y||(o=o.toLowerCase(),g=g.toLowerCase());var T=o.length,b,N=Math.abs(c),w={};for(b=0;b<g.length;b++)w[g[b]]=b;for(b=0;b<T;b++){var I=o[b];if(I!=="-"&&I in w&&w[I]>=N){if(I==="1"&&N===1)continue;throw new Error(I+" is not a valid digit in base "+c+".")}}c=Z(c);var j=[],J=o[0]==="-";for(b=J?1:0;b<o.length;b++){var I=o[b];if(I in w)j.push(Z(w[I]));else if(I==="<"){var $=b;do b++;while(o[b]!==">"&&b<o.length);j.push(Z(o.slice($+1,b)))}else throw new Error(I+" is not a valid character")}return rr(j,c,J)};function rr(o,c,g){var y=f[0],T=f[1],b;for(b=o.length-1;b>=0;b--)y=y.add(o[b].times(T)),T=T.times(c);return g?y.negate():y}function Yr(o,c){return c=c||u,o<c.length?c[o]:"<"+o+">"}function Ht(o,c){if(c=e(c),c.isZero()){if(o.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(c.equals(-1)){if(o.isZero())return{value:[0],isNegative:!1};if(o.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-o.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var g=Array.apply(null,Array(o.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return g.unshift([1]),{value:[].concat.apply([],g),isNegative:!1}}var y=!1;if(o.isNegative()&&c.isPositive()&&(y=!0,o=o.abs()),c.isUnit())return o.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(o.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:y};for(var T=[],b=o,N;b.isNegative()||b.compareAbs(c)>=0;){N=b.divmod(c),b=N.quotient;var w=N.remainder;w.isNegative()&&(w=c.minus(w).abs(),b=b.next()),T.push(w.toJSNumber())}return T.push(b.toJSNumber()),{value:T.reverse(),isNegative:y}}function ir(o,c,g){var y=Ht(o,c);return(y.isNegative?"-":"")+y.value.map(function(T){return Yr(T,g)}).join("")}d.prototype.toArray=function(o){return Ht(this,o)},m.prototype.toArray=function(o){return Ht(this,o)},A.prototype.toArray=function(o){return Ht(this,o)},d.prototype.toString=function(o,c){if(o===n&&(o=10),o!==10||c)return ir(this,o,c);for(var g=this.value,y=g.length,T=String(g[--y]),b="0000000",N;--y>=0;)N=String(g[y]),T+=b.slice(N.length)+N;var w=this.sign?"-":"";return w+T},m.prototype.toString=function(o,c){return o===n&&(o=10),o!=10||c?ir(this,o,c):String(this.value)},A.prototype.toString=m.prototype.toString,A.prototype.toJSON=d.prototype.toJSON=m.prototype.toJSON=function(){return this.toString()},d.prototype.valueOf=function(){return parseInt(this.toString(),10)},d.prototype.toJSNumber=d.prototype.valueOf,m.prototype.valueOf=function(){return this.value},m.prototype.toJSNumber=m.prototype.valueOf,A.prototype.valueOf=A.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function sr(o){if(P(+o)){var c=+o;if(c===ae(c))return h?new A(BigInt(c)):new m(c);throw new Error("Invalid integer: "+o)}var g=o[0]==="-";g&&(o=o.slice(1));var y=o.split(/e/i);if(y.length>2)throw new Error("Invalid integer: "+y.join("e"));if(y.length===2){var T=y[1];if(T[0]==="+"&&(T=T.slice(1)),T=+T,T!==ae(T)||!P(T))throw new Error("Invalid integer: "+T+" is not a valid exponent.");var b=y[0],N=b.indexOf(".");if(N>=0&&(T-=b.length-N-1,b=b.slice(0,N)+b.slice(N+1)),T<0)throw new Error("Cannot include negative exponent part for integers");b+=new Array(T+1).join("0"),o=b}var w=/^([0-9][0-9]*)$/.test(o);if(!w)throw new Error("Invalid integer: "+o);if(h)return new A(BigInt(g?"-"+o:o));for(var I=[],j=o.length,J=i,$=j-J;j>0;)I.push(+o.slice($,j)),$-=J,$<0&&($=0),j-=J;return k(I),new d(I,g)}function yn(o){if(h)return new A(BigInt(o));if(P(o)){if(o!==ae(o))throw new Error(o+" is not an integer.");return new m(o)}return sr(o.toString())}function Z(o){return typeof o=="number"?yn(o):typeof o=="string"?sr(o):typeof o=="bigint"?new A(o):o}for(var et=0;et<1e3;et++)f[et]=Z(et),et>0&&(f[-et]=Z(-et));return f.one=f[1],f.zero=f[0],f.minusOne=f[-1],f.max=mn,f.min=_n,f.gcd=vn,f.lcm=tr,f.isInstance=function(o){return o instanceof d||o instanceof m||o instanceof A},f.randBetween=nr,f.fromArray=function(o,c,g){return rr(o.map(Z),Z(c||10),g)},f}();t.hasOwnProperty("exports")&&(t.exports=e)}(ai)),ai.exports}var Ul=Ml(),Bl=Ss(Ul);const Ds=64,Ei=16,xt=Ds/Ei;function Gl(){try{return!0}catch{return!1}}function Vl(t,e,n){let r=0;for(let i=0;i<n;i++){const s=t[e+i];if(s===void 0)break;r+=s*16**i}return r}function Ps(t){const e=[];for(let n=0;n<t.length;n++){let r=Number(t[n]);for(let i=0;r||i<e.length;i++)r+=(e[i]||0)*10,e[i]=r%16,r=(r-e[i])/16}return e}function Hl(t){const e=Ps(t),n=Array(xt);for(let r=0;r<xt;r++)n[xt-1-r]=Vl(e,r*xt,xt);return n}class tt{static fromString(e){return new tt(Hl(e),e)}static fromBit(e){const n=Array(xt),r=Math.floor(e/Ei);for(let i=0;i<xt;i++)n[xt-1-i]=i===r?1<<e-r*Ei:0;return new tt(n)}constructor(e,n){this.parts=e,this.str=n}and({parts:e}){return new tt(this.parts.map((n,r)=>n&e[r]))}or({parts:e}){return new tt(this.parts.map((n,r)=>n|e[r]))}xor({parts:e}){return new tt(this.parts.map((n,r)=>n^e[r]))}not(){return new tt(this.parts.map(e=>~e))}equals({parts:e}){return this.parts.every((n,r)=>n===e[r])}toString(){if(this.str!=null)return this.str;const e=new Array(Ds/4);return this.parts.forEach((n,r)=>{const i=Ps(n.toString());for(let s=0;s<4;s++)e[s+r*4]=i[3-s]||0}),this.str=Bl.fromArray(e,16).toString()}toJSON(){return this.toString()}}const Bt=Gl();Bt&&BigInt.prototype.toJSON==null&&(BigInt.prototype.toJSON=function(){return this.toString()});const _r={},Ms=Bt?function(e){return BigInt(e)}:function(e){return e instanceof tt?e:(typeof e=="number"&&(e=e.toString()),_r[e]!=null||(_r[e]=tt.fromString(e)),_r[e])},Ne=Ms(0),Br=Bt?function(e=Ne,n=Ne){return e&n}:function(e=Ne,n=Ne){return e.and(n)},Us=Bt?function(e=Ne,n=Ne){return e|n}:function(e=Ne,n=Ne){return e.or(n)},ql=Bt?function(e=Ne,n=Ne){return e^n}:function(e=Ne,n=Ne){return e.xor(n)},Cl=Bt?function(e=Ne){return~e}:function(e=Ne){return e.not()},Di=Bt?function(e,n){return e===n}:function(e,n){return e==null||n==null?e==n:e.equals(n)};function Zl(...t){let e=t[0];for(let n=1;n<t.length;n++)e=Us(e,t[n]);return e}function Fl(t,e){return Di(Br(t,e),e)}function jl(t,e){return!Di(Br(t,e),Ne)}function Kl(t,e){return e===Ne?t:Us(t,e)}function $l(t,e){return e===Ne?t:ql(t,Br(t,e))}const Yl=Bt?function(e){return BigInt(1)<<BigInt(e)}:function(e){return tt.fromBit(e)};var q={combine:Zl,add:Kl,remove:$l,filter:Br,invert:Cl,has:Fl,hasAny:jl,equals:Di,deserialize:Ms,getFlag:Yl},as;(function(t){t[t.CLOSE_NORMAL=1e3]="CLOSE_NORMAL",t[t.CLOSE_UNSUPPORTED=1003]="CLOSE_UNSUPPORTED",t[t.CLOSE_ABNORMAL=1006]="CLOSE_ABNORMAL",t[t.INVALID_CLIENTID=4e3]="INVALID_CLIENTID",t[t.INVALID_ORIGIN=4001]="INVALID_ORIGIN",t[t.RATELIMITED=4002]="RATELIMITED",t[t.TOKEN_REVOKED=4003]="TOKEN_REVOKED",t[t.INVALID_VERSION=4004]="INVALID_VERSION",t[t.INVALID_ENCODING=4005]="INVALID_ENCODING"})(as||(as={}));var bi;(function(t){t[t.INVALID_PAYLOAD=4e3]="INVALID_PAYLOAD",t[t.INVALID_COMMAND=4002]="INVALID_COMMAND",t[t.INVALID_EVENT=4004]="INVALID_EVENT",t[t.INVALID_PERMISSIONS=4006]="INVALID_PERMISSIONS"})(bi||(bi={}));var Ti;(function(t){t.LANDSCAPE="landscape",t.PORTRAIT="portrait"})(Ti||(Ti={}));var Et;(function(t){t.MOBILE="mobile",t.DESKTOP="desktop"})(Et||(Et={}));Object.freeze({CREATE_INSTANT_INVITE:q.getFlag(0),KICK_MEMBERS:q.getFlag(1),BAN_MEMBERS:q.getFlag(2),ADMINISTRATOR:q.getFlag(3),MANAGE_CHANNELS:q.getFlag(4),MANAGE_GUILD:q.getFlag(5),ADD_REACTIONS:q.getFlag(6),VIEW_AUDIT_LOG:q.getFlag(7),PRIORITY_SPEAKER:q.getFlag(8),STREAM:q.getFlag(9),VIEW_CHANNEL:q.getFlag(10),SEND_MESSAGES:q.getFlag(11),SEND_TTS_MESSAGES:q.getFlag(12),MANAGE_MESSAGES:q.getFlag(13),EMBED_LINKS:q.getFlag(14),ATTACH_FILES:q.getFlag(15),READ_MESSAGE_HISTORY:q.getFlag(16),MENTION_EVERYONE:q.getFlag(17),USE_EXTERNAL_EMOJIS:q.getFlag(18),VIEW_GUILD_INSIGHTS:q.getFlag(19),CONNECT:q.getFlag(20),SPEAK:q.getFlag(21),MUTE_MEMBERS:q.getFlag(22),DEAFEN_MEMBERS:q.getFlag(23),MOVE_MEMBERS:q.getFlag(24),USE_VAD:q.getFlag(25),CHANGE_NICKNAME:q.getFlag(26),MANAGE_NICKNAMES:q.getFlag(27),MANAGE_ROLES:q.getFlag(28),MANAGE_WEBHOOKS:q.getFlag(29),MANAGE_GUILD_EXPRESSIONS:q.getFlag(30),USE_APPLICATION_COMMANDS:q.getFlag(31),REQUEST_TO_SPEAK:q.getFlag(32),MANAGE_EVENTS:q.getFlag(33),MANAGE_THREADS:q.getFlag(34),CREATE_PUBLIC_THREADS:q.getFlag(35),CREATE_PRIVATE_THREADS:q.getFlag(36),USE_EXTERNAL_STICKERS:q.getFlag(37),SEND_MESSAGES_IN_THREADS:q.getFlag(38),USE_EMBEDDED_ACTIVITIES:q.getFlag(39),MODERATE_MEMBERS:q.getFlag(40),VIEW_CREATOR_MONETIZATION_ANALYTICS:q.getFlag(41),USE_SOUNDBOARD:q.getFlag(42),CREATE_GUILD_EXPRESSIONS:q.getFlag(43),CREATE_EVENTS:q.getFlag(44),USE_EXTERNAL_SOUNDS:q.getFlag(45),SEND_VOICE_MESSAGES:q.getFlag(46),SEND_POLLS:q.getFlag(49),USE_EXTERNAL_APPS:q.getFlag(50)});const ls=-1,zl=250;function xe(t){return Ls(e=>{var n;const[r]=(n=Object.entries(t).find(([,i])=>i===e))!==null&&n!==void 0?n:[];return e!=null&&r===void 0?t.UNHANDLED:e},v().or(V()))}function Bs(t){const e=ki().transform(n=>{const r=t.safeParse(n);return r.success?r.data:t._def.defaultValue()});return e.overlayType=t,e}const Wl=_.object({image_url:_.string()}),Xl=_.object({mediaUrl:_.string().max(1024)}),Jl=_.object({access_token:_.union([_.string(),_.null()]).optional()}),Gs=_.object({access_token:_.string(),user:_.object({username:_.string(),discriminator:_.string(),id:_.string(),avatar:_.union([_.string(),_.null()]).optional(),public_flags:_.number(),global_name:_.union([_.string(),_.null()]).optional()}),scopes:_.array(Bs(_.enum(["identify","email","connections","guilds","guilds.join","guilds.members.read","guilds.channels.read","gdm.join","bot","rpc","rpc.notifications.read","rpc.voice.read","rpc.voice.write","rpc.video.read","rpc.video.write","rpc.screenshare.read","rpc.screenshare.write","rpc.activities.write","webhook.incoming","messages.read","applications.builds.upload","applications.builds.read","applications.commands","applications.commands.permissions.update","applications.commands.update","applications.store.update","applications.entitlements","activities.read","activities.write","activities.invites.write","relationships.read","relationships.write","voice","dm_channels.read","role_connections.write","presences.read","presences.write","openid","dm_channels.messages.read","dm_channels.messages.write","gateway.connect","account.global_name.update","payment_sources.country_code","sdk.social_layer_presence","sdk.social_layer","lobbies.write"]).or(_.literal(-1)).default(-1))),expires:_.string(),application:_.object({description:_.string(),icon:_.union([_.string(),_.null()]).optional(),id:_.string(),rpc_origins:_.array(_.string()).optional(),name:_.string()})}),Vs=_.object({participants:_.array(_.object({id:_.string(),username:_.string(),global_name:_.union([_.string(),_.null()]).optional(),discriminator:_.string(),avatar:_.union([_.string(),_.null()]).optional(),flags:_.number(),bot:_.boolean(),avatar_decoration_data:_.union([_.object({asset:_.string(),skuId:_.string().optional(),expiresAt:_.number().optional()}),_.null()]).optional(),premium_type:_.union([_.number(),_.null()]).optional(),nickname:_.string().optional()}))}),Ql=_.object({command:_.string(),content:_.string().max(2e3).optional(),require_launch_channel:_.boolean().optional(),preview_image:_.object({height:_.number(),url:_.string(),width:_.number()}).optional(),components:_.array(_.object({type:_.literal(1),components:_.array(_.object({type:_.literal(2),style:_.number().gte(1).lte(5),label:_.string().max(80).optional(),custom_id:_.string().max(100).describe("Developer-defined identifier for the button; max 100 characters").optional()})).max(5).optional()})).optional()}),ec=_.object({success:_.boolean()}),tc=_.object({custom_id:_.string().max(64).optional(),message:_.string().max(1e3),link_id:_.string().max(64).optional()}),nc=_.object({success:_.boolean(),didCopyLink:_.boolean(),didSendMessage:_.boolean()}),Hs=_.object({relationships:_.array(_.object({type:_.number(),user:_.object({id:_.string(),username:_.string(),global_name:_.union([_.string(),_.null()]).optional(),discriminator:_.string(),avatar:_.union([_.string(),_.null()]).optional(),flags:_.number(),bot:_.boolean(),avatar_decoration_data:_.union([_.object({asset:_.string(),skuId:_.string().optional(),expiresAt:_.number().optional()}),_.null()]).optional(),premium_type:_.union([_.number(),_.null()]).optional()}),presence:_.object({status:_.string(),activity:_.union([_.object({session_id:_.string().optional(),type:_.number().optional(),name:_.string(),url:_.union([_.string(),_.null()]).optional(),application_id:_.string().optional(),state:_.string().optional(),details:_.string().optional(),emoji:_.union([_.object({name:_.string(),id:_.union([_.string(),_.null()]).optional(),animated:_.union([_.boolean(),_.null()]).optional()}),_.null()]).optional(),assets:_.object({large_image:_.string().optional(),large_text:_.string().optional(),small_image:_.string().optional(),small_text:_.string().optional()}).optional(),timestamps:_.object({start:_.number().optional(),end:_.number().optional()}).optional(),party:_.object({id:_.string().optional(),size:_.array(_.number()).min(2).max(2).optional(),privacy:_.number().optional()}).optional(),secrets:_.object({match:_.string().optional(),join:_.string().optional()}).optional(),sync_id:_.string().optional(),created_at:_.number().optional(),instance:_.boolean().optional(),flags:_.number().optional(),metadata:_.object({}).optional(),platform:_.string().optional(),supported_platforms:_.array(_.string()).optional(),buttons:_.array(_.string()).optional(),hangStatus:_.string().optional()}),_.null()]).optional()}).optional()}))}),rc=_.object({user_id:_.string(),content:_.string().min(0).max(1024).optional()}),ic=_.object({id:_.string().max(64)}),sc=_.union([_.object({id:_.string(),username:_.string(),global_name:_.union([_.string(),_.null()]).optional(),discriminator:_.string(),avatar:_.union([_.string(),_.null()]).optional(),flags:_.number(),bot:_.boolean(),avatar_decoration_data:_.union([_.object({asset:_.string(),skuId:_.string().optional(),expiresAt:_.number().optional()}),_.null()]).optional(),premium_type:_.union([_.number(),_.null()]).optional()}),_.null()]);var Ee;(function(t){t.INITIATE_IMAGE_UPLOAD="INITIATE_IMAGE_UPLOAD",t.OPEN_SHARE_MOMENT_DIALOG="OPEN_SHARE_MOMENT_DIALOG",t.AUTHENTICATE="AUTHENTICATE",t.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS="GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS",t.SHARE_INTERACTION="SHARE_INTERACTION",t.SHARE_LINK="SHARE_LINK",t.GET_RELATIONSHIPS="GET_RELATIONSHIPS",t.INVITE_USER_EMBEDDED="INVITE_USER_EMBEDDED",t.GET_USER="GET_USER"})(Ee||(Ee={}));const cs=_.object({}).optional().nullable(),li=_.void(),qs={[Ee.INITIATE_IMAGE_UPLOAD]:{request:li,response:Wl},[Ee.OPEN_SHARE_MOMENT_DIALOG]:{request:Xl,response:cs},[Ee.AUTHENTICATE]:{request:Jl,response:Gs},[Ee.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS]:{request:li,response:Vs},[Ee.SHARE_INTERACTION]:{request:Ql,response:ec},[Ee.SHARE_LINK]:{request:tc,response:nc},[Ee.GET_RELATIONSHIPS]:{request:li,response:Hs},[Ee.INVITE_USER_EMBEDDED]:{request:rc,response:cs},[Ee.GET_USER]:{request:ic,response:sc}},oc="DISPATCH";var U;(function(t){t.AUTHORIZE="AUTHORIZE",t.AUTHENTICATE="AUTHENTICATE",t.GET_GUILDS="GET_GUILDS",t.GET_GUILD="GET_GUILD",t.GET_CHANNEL="GET_CHANNEL",t.GET_CHANNELS="GET_CHANNELS",t.SELECT_VOICE_CHANNEL="SELECT_VOICE_CHANNEL",t.SELECT_TEXT_CHANNEL="SELECT_TEXT_CHANNEL",t.SUBSCRIBE="SUBSCRIBE",t.UNSUBSCRIBE="UNSUBSCRIBE",t.CAPTURE_SHORTCUT="CAPTURE_SHORTCUT",t.SET_CERTIFIED_DEVICES="SET_CERTIFIED_DEVICES",t.SET_ACTIVITY="SET_ACTIVITY",t.GET_SKUS="GET_SKUS",t.GET_ENTITLEMENTS="GET_ENTITLEMENTS",t.GET_SKUS_EMBEDDED="GET_SKUS_EMBEDDED",t.GET_ENTITLEMENTS_EMBEDDED="GET_ENTITLEMENTS_EMBEDDED",t.START_PURCHASE="START_PURCHASE",t.SET_CONFIG="SET_CONFIG",t.SEND_ANALYTICS_EVENT="SEND_ANALYTICS_EVENT",t.USER_SETTINGS_GET_LOCALE="USER_SETTINGS_GET_LOCALE",t.OPEN_EXTERNAL_LINK="OPEN_EXTERNAL_LINK",t.ENCOURAGE_HW_ACCELERATION="ENCOURAGE_HW_ACCELERATION",t.CAPTURE_LOG="CAPTURE_LOG",t.SET_ORIENTATION_LOCK_STATE="SET_ORIENTATION_LOCK_STATE",t.OPEN_INVITE_DIALOG="OPEN_INVITE_DIALOG",t.GET_PLATFORM_BEHAVIORS="GET_PLATFORM_BEHAVIORS",t.GET_CHANNEL_PERMISSIONS="GET_CHANNEL_PERMISSIONS",t.OPEN_SHARE_MOMENT_DIALOG="OPEN_SHARE_MOMENT_DIALOG",t.INITIATE_IMAGE_UPLOAD="INITIATE_IMAGE_UPLOAD",t.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS="GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS",t.SHARE_LINK="SHARE_LINK",t.GET_RELATIONSHIPS="GET_RELATIONSHIPS",t.INVITE_USER_EMBEDDED="INVITE_USER_EMBEDDED",t.GET_USER="GET_USER"})(U||(U={}));const un=x({cmd:v(),data:Kn(),evt:Ur(),nonce:v()}).passthrough(),ac=Object.assign(Object.assign({},Gs.shape.scopes.element.overlayType._def.innerType.options[0].Values),{UNHANDLED:-1});xe(ac);const lc=Hs.shape.relationships.element,Ut=x({id:v(),username:v(),discriminator:v(),global_name:v().optional().nullable(),avatar:v().optional().nullable(),avatar_decoration_data:x({asset:v(),sku_id:v().optional()}).nullable(),bot:K(),flags:V().optional().nullable(),premium_type:V().optional().nullable()}),Pi=x({user:Ut,nick:v().optional().nullable(),roles:te(v()),joined_at:v(),deaf:K(),mute:K()}),cc=x({user_id:v(),nick:v().optional().nullable(),guild_id:v(),avatar:v().optional().nullable(),avatar_decoration_data:x({asset:v(),sku_id:v().optional().nullable()}).optional().nullable(),color_string:v().optional().nullable()}),Mi=x({id:v(),name:v().optional().nullable(),roles:te(v()).optional().nullable(),user:Ut.optional().nullable(),require_colons:K().optional().nullable(),managed:K().optional().nullable(),animated:K().optional().nullable(),available:K().optional().nullable()}),Cs=x({mute:K(),deaf:K(),self_mute:K(),self_deaf:K(),suppress:K()}),Zs=x({mute:K(),nick:v(),user:Ut,voice_state:Cs,volume:V()}),uc={UNHANDLED:-1,IDLE:"idle",DND:"dnd",ONLINE:"online",OFFLINE:"offline"},vr=xe(uc),xn=x({name:v(),type:V(),url:v().optional().nullable(),created_at:V().optional().nullable(),timestamps:x({start:V(),end:V()}).partial().optional().nullable(),application_id:v().optional().nullable(),details:v().optional().nullable(),state:v().optional().nullable(),emoji:Mi.optional().nullable(),party:x({id:v().optional().nullable(),size:te(V()).optional().nullable()}).optional().nullable(),assets:x({large_image:v().nullable(),large_text:v().nullable(),small_image:v().nullable(),small_text:v().nullable()}).partial().optional().nullable(),secrets:x({join:v(),match:v()}).partial().optional().nullable(),instance:K().optional().nullable(),flags:V().optional().nullable()}),dc={UNHANDLED:-1,ROLE:0,MEMBER:1},fc=x({id:v(),type:xe(dc),allow:v(),deny:v()}),Fs={UNHANDLED:-1,DM:1,GROUP_DM:3,GUILD_TEXT:0,GUILD_VOICE:2,GUILD_CATEGORY:4,GUILD_ANNOUNCEMENT:5,GUILD_STORE:6,ANNOUNCEMENT_THREAD:10,PUBLIC_THREAD:11,PRIVATE_THREAD:12,GUILD_STAGE_VOICE:13,GUILD_DIRECTORY:14,GUILD_FORUM:15},js=x({id:v(),type:xe(Fs),guild_id:v().optional().nullable(),position:V().optional().nullable(),permission_overwrites:te(fc).optional().nullable(),name:v().optional().nullable(),topic:v().optional().nullable(),nsfw:K().optional().nullable(),last_message_id:v().optional().nullable(),bitrate:V().optional().nullable(),user_limit:V().optional().nullable(),rate_limit_per_user:V().optional().nullable(),recipients:te(Ut).optional().nullable(),icon:v().optional().nullable(),owner_id:v().optional().nullable(),application_id:v().optional().nullable(),parent_id:v().optional().nullable(),last_pin_timestamp:v().optional().nullable()}),hc=x({user:Ut,guild_id:v(),status:vr,activities:te(xn),client_status:x({desktop:vr,mobile:vr,web:vr}).partial()}),pc=x({id:v(),name:v(),color:V(),hoist:K(),position:V(),permissions:v(),managed:K(),mentionable:K()});x({id:v(),name:v(),owner_id:v(),icon:v().nullable(),icon_hash:v().optional().nullable(),splash:v().nullable(),discovery_splash:v().nullable(),owner:K().optional().nullable(),permissions:v().optional().nullable(),region:v(),afk_channel_id:v().nullable(),afk_timeout:V(),widget_enabled:K().optional().nullable(),widget_channel_id:v().optional().nullable(),verification_level:V(),default_message_notifications:V(),explicit_content_filter:V(),roles:te(pc),emojis:te(Mi),features:te(v()),mfa_level:V(),application_id:v().nullable(),system_channel_id:v().nullable(),system_channel_flags:V(),rules_channel_id:v().nullable(),joined_at:v().optional().nullable(),large:K().optional().nullable(),unavailable:K().optional().nullable(),member_count:V().optional().nullable(),voice_states:te(Cs).optional().nullable(),members:te(Pi).optional().nullable(),channels:te(js).optional().nullable(),presences:te(hc).optional().nullable(),max_presences:V().optional().nullable(),max_members:V().optional().nullable(),vanity_url_code:v().nullable(),description:v().nullable(),banner:v().nullable(),premium_tier:V(),premium_subscription_count:V().optional().nullable(),preferred_locale:v(),public_updates_channel_id:v().nullable(),max_video_channel_users:V().optional().nullable(),approximate_member_count:V().optional().nullable(),approximate_presence_count:V().optional().nullable()});const gc=x({id:v(),guild_id:v(),type:V(),name:v()}),mc=x({id:v(),filename:v(),size:V(),url:v(),proxy_url:v(),height:V().optional().nullable(),width:V().optional().nullable()}),_c=x({text:v(),icon_url:v().optional().nullable(),proxy_icon_url:v().optional().nullable()}),Si=x({url:v().optional().nullable(),proxy_url:v().optional().nullable(),height:V().optional().nullable(),width:V().optional().nullable()}),vc=Si.omit({proxy_url:!0}),yc=x({name:v().optional().nullable(),url:v().optional().nullable()}),Ec=x({name:v().optional().nullable(),url:v().optional().nullable(),icon_url:v().optional().nullable(),proxy_icon_url:v().optional().nullable()}),bc=x({name:v(),value:v(),inline:K()}),Tc=x({title:v().optional().nullable(),type:v().optional().nullable(),description:v().optional().nullable(),url:v().optional().nullable(),timestamp:v().optional().nullable(),color:V().optional().nullable(),footer:_c.optional().nullable(),image:Si.optional().nullable(),thumbnail:Si.optional().nullable(),video:vc.optional().nullable(),provider:yc.optional().nullable(),author:Ec.optional().nullable(),fields:te(bc).optional().nullable()}),Sc=x({count:V(),me:K(),emoji:Mi}),Ac=x({type:V(),party_id:v().optional().nullable()}),wc=x({id:v(),cover_image:v().optional().nullable(),description:v(),icon:v().optional().nullable(),name:v()}),Nc=x({message_id:v().optional().nullable(),channel_id:v().optional().nullable(),guild_id:v().optional().nullable()}),Ic=x({id:v(),channel_id:v(),guild_id:v().optional().nullable(),author:Ut.optional().nullable(),member:Pi.optional().nullable(),content:v(),timestamp:v(),edited_timestamp:v().optional().nullable(),tts:K(),mention_everyone:K(),mentions:te(Ut),mention_roles:te(v()),mention_channels:te(gc),attachments:te(mc),embeds:te(Tc),reactions:te(Sc).optional().nullable(),nonce:Li([v(),V()]).optional().nullable(),pinned:K(),webhook_id:v().optional().nullable(),type:V(),activity:Ac.optional().nullable(),application:wc.optional().nullable(),message_reference:Nc.optional().nullable(),flags:V().optional().nullable(),stickers:te(Kn()).optional().nullable(),referenced_message:Kn().optional().nullable()}),Oc=x({id:v(),name:v()}),Rc={UNHANDLED:-1,KEYBOARD_KEY:0,MOUSE_BUTTON:1,KEYBOARD_MODIFIER_KEY:2,GAMEPAD_BUTTON:3},Ks=x({type:xe(Rc),code:V(),name:v()}),xc={UNHANDLED:-1,PUSH_TO_TALK:"PUSH_TO_TALK",VOICE_ACTIVITY:"VOICE_ACTIVITY"},kc=x({type:xe(xc),auto_threshold:K(),threshold:V(),shortcut:te(Ks),delay:V()}),us=x({device_id:v(),volume:V(),available_devices:te(Oc)}),Lc={UNHANDLED:-1,AUDIO_INPUT:"AUDIO_INPUT",AUDIO_OUTPUT:"AUDIO_OUTPUT",VIDEO_INPUT:"VIDEO_INPUT"};x({type:xe(Lc),id:v(),vendor:x({name:v(),url:v()}),model:x({name:v(),url:v()}),related:te(v()),echo_cancellation:K().optional().nullable(),noise_suppression:K().optional().nullable(),automatic_gain_control:K().optional().nullable(),hardware_mute:K().optional().nullable()});const Dc={UNHANDLED:-1,APPLICATION:1,DLC:2,CONSUMABLE:3,BUNDLE:4,SUBSCRIPTION:5},Pc=x({id:v(),name:v(),type:xe(Dc),price:x({amount:V(),currency:v()}),application_id:v(),flags:V(),release_date:v().nullable()}),Mc={UNHANDLED:-1,PURCHASE:1,PREMIUM_SUBSCRIPTION:2,DEVELOPER_GIFT:3,TEST_MODE_PURCHASE:4,FREE_PURCHASE:5,USER_GIFT:6,PREMIUM_PURCHASE:7},Ui=x({id:v(),sku_id:v(),application_id:v(),user_id:v(),gift_code_flags:V(),type:xe(Mc),gifter_user_id:v().optional().nullable(),branches:te(v()).optional().nullable(),starts_at:v().optional().nullable(),ends_at:v().optional().nullable(),parent_id:v().optional().nullable(),consumed:K().optional().nullable(),deleted:K().optional().nullable(),gift_code_batch_id:v().optional().nullable()}),Uc={UNHANDLED:-1,UNLOCKED:1,PORTRAIT:2,LANDSCAPE:3};xe(Uc);const Bc={UNHANDLED:-1,NOMINAL:0,FAIR:1,SERIOUS:2,CRITICAL:3},Gc=xe(Bc),$s={UNHANDLED:-1,PORTRAIT:0,LANDSCAPE:1};xe($s);const Ys={UNHANDLED:-1,FOCUSED:0,PIP:1,GRID:2};xe(Ys);const Bi="ERROR";var re;(function(t){t.READY="READY",t.VOICE_STATE_UPDATE="VOICE_STATE_UPDATE",t.SPEAKING_START="SPEAKING_START",t.SPEAKING_STOP="SPEAKING_STOP",t.ACTIVITY_LAYOUT_MODE_UPDATE="ACTIVITY_LAYOUT_MODE_UPDATE",t.ORIENTATION_UPDATE="ORIENTATION_UPDATE",t.CURRENT_USER_UPDATE="CURRENT_USER_UPDATE",t.CURRENT_GUILD_MEMBER_UPDATE="CURRENT_GUILD_MEMBER_UPDATE",t.ENTITLEMENT_CREATE="ENTITLEMENT_CREATE",t.THERMAL_STATE_UPDATE="THERMAL_STATE_UPDATE",t.ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE="ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE",t.RELATIONSHIP_UPDATE="RELATIONSHIP_UPDATE"})(re||(re={}));const Be=un.extend({evt:cn(re),nonce:v().nullable(),cmd:_e(oc),data:x({}).passthrough()}),zs=un.extend({evt:_e(Bi),data:x({code:V(),message:v().optional()}).passthrough(),cmd:cn(U),nonce:v().nullable()}),Vc=Be.extend({evt:v()}),Hc=Li([Be,Vc,zs]);function qc(t){const e=t.evt;if(!(e in re))throw new Error(`Unrecognized event type ${t.evt}`);return Cc[e].payload.parse(t)}const Cc={[re.READY]:{payload:Be.extend({evt:_e(re.READY),data:x({v:V(),config:x({cdn_host:v().optional(),api_endpoint:v(),environment:v()}),user:x({id:v(),username:v(),discriminator:v(),avatar:v().optional()}).optional()})})},[re.VOICE_STATE_UPDATE]:{payload:Be.extend({evt:_e(re.VOICE_STATE_UPDATE),data:Zs}),subscribeArgs:x({channel_id:v()})},[re.SPEAKING_START]:{payload:Be.extend({evt:_e(re.SPEAKING_START),data:x({lobby_id:v().optional(),channel_id:v().optional(),user_id:v()})}),subscribeArgs:x({lobby_id:v().nullable().optional(),channel_id:v().nullable().optional()})},[re.SPEAKING_STOP]:{payload:Be.extend({evt:_e(re.SPEAKING_STOP),data:x({lobby_id:v().optional(),channel_id:v().optional(),user_id:v()})}),subscribeArgs:x({lobby_id:v().nullable().optional(),channel_id:v().nullable().optional()})},[re.ACTIVITY_LAYOUT_MODE_UPDATE]:{payload:Be.extend({evt:_e(re.ACTIVITY_LAYOUT_MODE_UPDATE),data:x({layout_mode:xe(Ys)})})},[re.ORIENTATION_UPDATE]:{payload:Be.extend({evt:_e(re.ORIENTATION_UPDATE),data:x({screen_orientation:xe($s),orientation:cn(Ti)})})},[re.CURRENT_USER_UPDATE]:{payload:Be.extend({evt:_e(re.CURRENT_USER_UPDATE),data:Ut})},[re.CURRENT_GUILD_MEMBER_UPDATE]:{payload:Be.extend({evt:_e(re.CURRENT_GUILD_MEMBER_UPDATE),data:cc}),subscribeArgs:x({guild_id:v()})},[re.ENTITLEMENT_CREATE]:{payload:Be.extend({evt:_e(re.ENTITLEMENT_CREATE),data:x({entitlement:Ui})})},[re.THERMAL_STATE_UPDATE]:{payload:Be.extend({evt:_e(re.THERMAL_STATE_UPDATE),data:x({thermal_state:Gc})})},[re.ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE]:{payload:Be.extend({evt:_e(re.ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE),data:x({participants:Vs.shape.participants})})},[re.RELATIONSHIP_UPDATE]:{payload:Be.extend({evt:_e(re.RELATIONSHIP_UPDATE),data:lc})}};function Zc(t,e){throw e}const Gr=x({}).nullable(),Ws=x({code:v()}),Fc=x({guilds:te(x({id:v(),name:v()}))}),jc=x({id:v(),name:v(),icon_url:v().optional(),members:te(Pi)}),ln=x({id:v(),type:xe(Fs),guild_id:v().optional().nullable(),name:v().optional().nullable(),topic:v().optional().nullable(),bitrate:V().optional().nullable(),user_limit:V().optional().nullable(),position:V().optional().nullable(),voice_states:te(Zs),messages:te(Ic)}),Kc=x({channels:te(js)});ln.nullable();const $c=ln.nullable(),Yc=ln.nullable();x({input:us,output:us,mode:kc,automatic_gain_control:K(),echo_cancellation:K(),noise_suppression:K(),qos:K(),silence_warning:K(),deaf:K(),mute:K()});const zc=x({evt:v()}),Wc=x({shortcut:Ks}),Xs=xn,Js=x({skus:te(Pc)}),Qs=x({entitlements:te(Ui)}),eo=te(Ui).nullable(),to=x({use_interactive_pip:K()}),no=x({locale:v()}),ro=x({enabled:K()}),io=x({permissions:xs().or(v())}),so=Bs(x({opened:K().or(Ur())}).default({opened:null})),oo=x({iosKeyboardResizesView:ks(K())}),Xc=un.extend({cmd:cn(U),evt:Ur()});function Jc({cmd:t,data:e}){switch(t){case U.AUTHORIZE:return Ws.parse(e);case U.CAPTURE_SHORTCUT:return Wc.parse(e);case U.ENCOURAGE_HW_ACCELERATION:return ro.parse(e);case U.GET_CHANNEL:return ln.parse(e);case U.GET_CHANNELS:return Kc.parse(e);case U.GET_CHANNEL_PERMISSIONS:return io.parse(e);case U.GET_GUILD:return jc.parse(e);case U.GET_GUILDS:return Fc.parse(e);case U.GET_PLATFORM_BEHAVIORS:return oo.parse(e);case U.GET_CHANNEL:return ln.parse(e);case U.SELECT_TEXT_CHANNEL:return Yc.parse(e);case U.SELECT_VOICE_CHANNEL:return $c.parse(e);case U.SET_ACTIVITY:return Xs.parse(e);case U.GET_SKUS_EMBEDDED:return Js.parse(e);case U.GET_ENTITLEMENTS_EMBEDDED:return Qs.parse(e);case U.SET_CONFIG:return to.parse(e);case U.START_PURCHASE:return eo.parse(e);case U.SUBSCRIBE:case U.UNSUBSCRIBE:return zc.parse(e);case U.USER_SETTINGS_GET_LOCALE:return no.parse(e);case U.OPEN_EXTERNAL_LINK:return so.parse(e);case U.SET_ORIENTATION_LOCK_STATE:case U.SET_CERTIFIED_DEVICES:case U.SEND_ANALYTICS_EVENT:case U.OPEN_INVITE_DIALOG:case U.CAPTURE_LOG:case U.GET_SKUS:case U.GET_ENTITLEMENTS:return Gr.parse(e);case U.AUTHENTICATE:case U.INITIATE_IMAGE_UPLOAD:case U.OPEN_SHARE_MOMENT_DIALOG:case U.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS:case U.SHARE_LINK:case U.GET_RELATIONSHIPS:case U.INVITE_USER_EMBEDDED:case U.GET_USER:const{response:n}=qs[t];return n.parse(e);default:Zc(t,new Error(`Unrecognized command ${t}`))}}function Qc(t){return Object.assign(Object.assign({},t),{data:Jc(t)})}x({frame_id:v(),platform:cn(Et).optional().nullable()});x({v:_e(1),encoding:_e("json").optional(),client_id:v(),frame_id:v()});const eu=x({code:V(),message:v().optional()}),tu=x({evt:v().nullable(),nonce:v().nullable(),data:Kn().nullable(),cmd:v()}).passthrough();function nu(t){const e=tu.parse(t);return e.evt!=null?e.evt===Bi?zs.parse(e):qc(Hc.parse(e)):Qc(Xc.passthrough().parse(e))}function Ge(t,e,n,r=()=>{}){const i=un.extend({cmd:_e(e),data:n});return async s=>{const l=await t({cmd:e,args:s,transfer:r(s)});return i.parse(l).data}}function Gt(t,e=()=>{}){const n=qs[t].response,r=un.extend({cmd:_e(t),data:n});return i=>async s=>{const l=await i({cmd:t,args:s,transfer:e(s)});return r.parse(l).data}}const ru=Gt(Ee.AUTHENTICATE),iu=t=>Ge(t,U.AUTHORIZE,Ws),su=t=>Ge(t,U.CAPTURE_LOG,Gr),ou=t=>Ge(t,U.ENCOURAGE_HW_ACCELERATION,ro),au=t=>Ge(t,U.GET_ENTITLEMENTS_EMBEDDED,Qs),lu=t=>Ge(t,U.GET_SKUS_EMBEDDED,Js),cu=t=>Ge(t,U.GET_CHANNEL_PERMISSIONS,io),uu=t=>Ge(t,U.GET_PLATFORM_BEHAVIORS,oo),du=t=>Ge(t,U.OPEN_EXTERNAL_LINK,so),fu=t=>Ge(t,U.OPEN_INVITE_DIALOG,Gr),hu=Gt(Ee.OPEN_SHARE_MOMENT_DIALOG);xn.pick({state:!0,details:!0,timestamps:!0,assets:!0,party:!0,secrets:!0,instance:!0,type:!0}).extend({type:xn.shape.type.optional(),instance:xn.shape.instance.optional()}).nullable();const pu=t=>Ge(t,U.SET_ACTIVITY,Xs),gu=t=>Ge(t,U.SET_CONFIG,to);function mu({sendCommand:t,cmd:e,response:n,fallbackTransform:r,transferTransform:i=()=>{}}){const s=un.extend({cmd:_e(e),data:n});return async l=>{try{const u=await t({cmd:e,args:l,transfer:i(l)});return s.parse(u).data}catch(u){if(u.code===bi.INVALID_PAYLOAD){const h=r(l),f=await t({cmd:e,args:h,transfer:i(h)});return s.parse(f).data}else throw u}}}const _u=t=>({lock_state:t.lock_state,picture_in_picture_lock_state:t.picture_in_picture_lock_state}),vu=t=>mu({sendCommand:t,cmd:U.SET_ORIENTATION_LOCK_STATE,response:Gr,fallbackTransform:_u}),yu=Gt(Ee.SHARE_LINK),Eu=t=>Ge(t,U.START_PURCHASE,eo),bu=t=>Ge(t,U.USER_SETTINGS_GET_LOCALE,no),Tu=Gt(Ee.INITIATE_IMAGE_UPLOAD),Su=t=>Ge(t,U.GET_CHANNEL,ln),Au=Gt(Ee.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS),wu=Gt(Ee.GET_RELATIONSHIPS),Nu=Gt(Ee.INVITE_USER_EMBEDDED),Iu=Gt(Ee.GET_USER);function Ou(t){return{authenticate:ru(t),authorize:iu(t),captureLog:su(t),encourageHardwareAcceleration:ou(t),getChannel:Su(t),getChannelPermissions:cu(t),getEntitlements:au(t),getPlatformBehaviors:uu(t),getSkus:lu(t),openExternalLink:du(t),openInviteDialog:fu(t),openShareMomentDialog:hu(t),setActivity:pu(t),setConfig:gu(t),setOrientationLockState:vu(t),shareLink:yu(t),startPurchase:Eu(t),userSettingsGetLocale:bu(t),initiateImageUpload:Tu(t),getInstanceConnectedParticipants:Au(t),getRelationships:wu(t),inviteUserEmbedded:Nu(t),getUser:Iu(t)}}class Ru extends Error{constructor(e,n=""){super(n),this.code=e,this.message=n,this.name="Discord SDK Error"}}function xu(){return{disableConsoleLogOverride:!1}}const ku=["log","warn","debug","info","error"];function Lu(t,e,n){const r=t[e],i=t;r&&(t[e]=function(){const s=[].slice.call(arguments),l=""+s.join(" ");n(e,l),r.apply(i,s)})}var Du="2.0.0",Pu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ds={randomUUID:Pu},yr,Mu=new Uint8Array(16);function Uu(){if(!yr&&(yr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yr(Mu)}var we=[];for(var ci=0;ci<256;++ci)we.push((ci+256).toString(16).slice(1));function Bu(t,e=0){return(we[t[e+0]]+we[t[e+1]]+we[t[e+2]]+we[t[e+3]]+"-"+we[t[e+4]]+we[t[e+5]]+"-"+we[t[e+6]]+we[t[e+7]]+"-"+we[t[e+8]]+we[t[e+9]]+"-"+we[t[e+10]]+we[t[e+11]]+we[t[e+12]]+we[t[e+13]]+we[t[e+14]]+we[t[e+15]]).toLowerCase()}function fs(t,e,n){if(ds.randomUUID&&!t)return ds.randomUUID();t=t||{};var r=t.random||(t.rng||Uu)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bu(r)}var yt;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.FRAME=1]="FRAME",t[t.CLOSE=2]="CLOSE",t[t.HELLO=3]="HELLO"})(yt||(yt={}));const Gu=new Set(Vu());function Vu(){return typeof window>"u"?[]:[window.location.origin,"https://discord.com","https://discordapp.com","https://ptb.discord.com","https://ptb.discordapp.com","https://canary.discord.com","https://canary.discordapp.com","https://staging.discord.co","http://localhost:3333","https://pax.discord.com","null"]}function Hu(){var t;return[(t=window.parent.opener)!==null&&t!==void 0?t:window.parent,document.referrer?document.referrer:"*"]}class qu{getTransfer(e){var n;switch(e.cmd){case U.SUBSCRIBE:case U.UNSUBSCRIBE:return;default:return(n=e.transfer)!==null&&n!==void 0?n:void 0}}constructor(e,n){if(this.sdkVersion=Du,this.mobileAppVersion=null,this.source=null,this.sourceOrigin="",this.eventBus=new Ca,this.pendingCommands=new Map,this.sendCommand=u=>{var h;if(this.source==null)throw new Error("Attempting to send message before initialization");const f=fs();return(h=this.source)===null||h===void 0||h.postMessage([yt.FRAME,Object.assign(Object.assign({},u),{nonce:f})],this.sourceOrigin,this.getTransfer(u)),new Promise((m,A)=>{this.pendingCommands.set(f,{resolve:m,reject:A})})},this.commands=Ou(this.sendCommand),this.handleMessage=u=>{if(!Gu.has(u.origin))return;const h=u.data;if(!Array.isArray(h))return;const[f,d]=h;switch(f){case yt.HELLO:return;case yt.CLOSE:return this.handleClose(d);case yt.HANDSHAKE:return this.handleHandshake();case yt.FRAME:return this.handleFrame(d);default:throw new Error("Invalid message format")}},this.isReady=!1,this.clientId=e,this.configuration=n??xu(),typeof window<"u"&&window.addEventListener("message",this.handleMessage),typeof window>"u"){this.frameId="",this.instanceId="",this.customId=null,this.referrerId=null,this.platform=Et.DESKTOP,this.guildId=null,this.channelId=null,this.locationId=null;return}const r=new URLSearchParams(this._getSearch()),i=r.get("frame_id");if(!i)throw new Error("frame_id query param is not defined");this.frameId=i;const s=r.get("instance_id");if(!s)throw new Error("instance_id query param is not defined");this.instanceId=s;const l=r.get("platform");if(l){if(l!==Et.DESKTOP&&l!==Et.MOBILE)throw new Error(`Invalid query param "platform" of "${l}". Valid values are "${Et.DESKTOP}" or "${Et.MOBILE}"`)}else throw new Error("platform query param is not defined");this.platform=l,this.customId=r.get("custom_id"),this.referrerId=r.get("referrer_id"),this.guildId=r.get("guild_id"),this.channelId=r.get("channel_id"),this.locationId=r.get("location_id"),this.mobileAppVersion=r.get("mobile_app_version"),[this.source,this.sourceOrigin]=Hu(),this.addOnReadyListener(),this.handshake()}close(e,n){var r;window.removeEventListener("message",this.handleMessage);const i=fs();(r=this.source)===null||r===void 0||r.postMessage([yt.CLOSE,{code:e,message:n,nonce:i}],this.sourceOrigin)}async subscribe(e,n,...r){const[i]=r,s=this.eventBus.listenerCount(e),l=this.eventBus.on(e,n);return Object.values(re).includes(e)&&e!==re.READY&&s===0&&await this.sendCommand({cmd:U.SUBSCRIBE,args:i,evt:e}),l}async unsubscribe(e,n,...r){const[i]=r;return e!==re.READY&&this.eventBus.listenerCount(e)===1&&await this.sendCommand({cmd:U.UNSUBSCRIBE,evt:e,args:i}),this.eventBus.off(e,n)}async ready(){this.isReady||await new Promise(e=>{this.eventBus.once(re.READY,e)})}parseMajorMobileVersion(){if(this.mobileAppVersion&&this.mobileAppVersion.includes("."))try{return parseInt(this.mobileAppVersion.split(".")[0])}catch{return ls}return ls}handshake(){var e;const n={v:1,encoding:"json",client_id:this.clientId,frame_id:this.frameId},r=this.parseMajorMobileVersion();(this.platform===Et.DESKTOP||r>=zl)&&(n.sdk_version=this.sdkVersion),(e=this.source)===null||e===void 0||e.postMessage([yt.HANDSHAKE,n],this.sourceOrigin)}addOnReadyListener(){this.eventBus.once(re.READY,()=>{this.overrideConsoleLogging(),this.isReady=!0})}overrideConsoleLogging(){if(this.configuration.disableConsoleLogOverride)return;const e=(n,r)=>{this.commands.captureLog({level:n,message:r})};ku.forEach(n=>{Lu(console,n,e)})}handleClose(e){eu.parse(e)}handleHandshake(){}handleFrame(e){var n,r;let i;try{i=nu(e)}catch(s){console.error("Failed to parse",e),console.error(s);return}if(i.cmd==="DISPATCH")this.eventBus.emit(i.evt,i.data);else{if(i.evt===Bi){if(i.nonce!=null){(n=this.pendingCommands.get(i.nonce))===null||n===void 0||n.reject(i.data),this.pendingCommands.delete(i.nonce);return}this.eventBus.emit("error",new Ru(i.data.code,i.data.message))}if(i.nonce==null){console.error("Missing nonce",e);return}(r=this.pendingCommands.get(i.nonce))===null||r===void 0||r.resolve(i),this.pendingCommands.delete(i.nonce)}}_getSearch(){return typeof window>"u"?"":window.location.search}}var dn=1e9,Cu={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ho,fe=!0,Ye="[DecimalError] ",Yt=Ye+"Invalid argument: ",Gi=Ye+"Exponent out of range: ",fn=Math.floor,Ft=Math.pow,Zu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qe,Te=1e7,de=7,ao=9007199254740991,Pr=fn(ao/de),M={};M.absoluteValue=M.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};M.comparedTo=M.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};M.decimalPlaces=M.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*de;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};M.dividedBy=M.div=function(t){return bt(this,new this.constructor(t))};M.dividedToIntegerBy=M.idiv=function(t){var e=this,n=e.constructor;return ce(bt(e,new n(t),0,1),n.precision)};M.equals=M.eq=function(t){return!this.cmp(t)};M.exponent=function(){return ye(this)};M.greaterThan=M.gt=function(t){return this.cmp(t)>0};M.greaterThanOrEqualTo=M.gte=function(t){return this.cmp(t)>=0};M.isInteger=M.isint=function(){return this.e>this.d.length-2};M.isNegative=M.isneg=function(){return this.s<0};M.isPositive=M.ispos=function(){return this.s>0};M.isZero=function(){return this.s===0};M.lessThan=M.lt=function(t){return this.cmp(t)<0};M.lessThanOrEqualTo=M.lte=function(t){return this.cmp(t)<1};M.logarithm=M.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(qe))throw Error(Ye+"NaN");if(n.s<1)throw Error(Ye+(n.s?"NaN":"-Infinity"));return n.eq(qe)?new r(0):(fe=!1,e=bt($n(n,s),$n(t,s),s),fe=!0,ce(e,i))};M.minus=M.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?uo(e,t):lo(e,(t.s=-t.s,t))};M.modulo=M.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ye+"NaN");return n.s?(fe=!1,e=bt(n,t,0,1).times(t),fe=!0,n.minus(e)):ce(new r(n),i)};M.naturalExponential=M.exp=function(){return co(this)};M.naturalLogarithm=M.ln=function(){return $n(this)};M.negated=M.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};M.plus=M.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?lo(e,t):uo(e,(t.s=-t.s,t))};M.precision=M.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yt+t);if(e=ye(i)+1,r=i.d.length-1,n=r*de+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};M.squareRoot=M.sqrt=function(){var t,e,n,r,i,s,l,u=this,h=u.constructor;if(u.s<1){if(!u.s)return new h(0);throw Error(Ye+"NaN")}for(t=ye(u),fe=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=nt(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=fn((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new h(e)):r=new h(i.toString()),n=h.precision,i=l=n+3;;)if(s=r,r=s.plus(bt(u,s,l+2)).times(.5),nt(s.d).slice(0,l)===(e=nt(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(ce(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(e!="9999")break;l+=4}return fe=!0,ce(r,n)};M.times=M.mul=function(t){var e,n,r,i,s,l,u,h,f,d=this,m=d.constructor,A=d.d,P=(t=new m(t)).d;if(!d.s||!t.s)return new m(0);for(t.s*=d.s,n=d.e+t.e,h=A.length,f=P.length,h<f&&(s=A,A=P,P=s,l=h,h=f,f=l),s=[],l=h+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(e=0,i=h+r;i>r;)u=s[i]+P[r]*A[i-r-1]+e,s[i--]=u%Te|0,e=u/Te|0;s[i]=(s[i]+e)%Te|0}for(;!s[--l];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,fe?ce(t,m.precision):t};M.toDecimalPlaces=M.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(at(t,0,dn),e===void 0?e=r.rounding:at(e,0,8),ce(n,t+ye(n)+1,e))};M.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Xt(r,!0):(at(t,0,dn),e===void 0?e=i.rounding:at(e,0,8),r=ce(new i(r),t+1,e),n=Xt(r,!0,t+1)),n};M.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Xt(i):(at(t,0,dn),e===void 0?e=s.rounding:at(e,0,8),r=ce(new s(i),t+ye(i)+1,e),n=Xt(r.abs(),!1,t+ye(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};M.toInteger=M.toint=function(){var t=this,e=t.constructor;return ce(new e(t),ye(t)+1,e.rounding)};M.toNumber=function(){return+this};M.toPower=M.pow=function(t){var e,n,r,i,s,l,u=this,h=u.constructor,f=12,d=+(t=new h(t));if(!t.s)return new h(qe);if(u=new h(u),!u.s){if(t.s<1)throw Error(Ye+"Infinity");return u}if(u.eq(qe))return u;if(r=h.precision,t.eq(qe))return ce(u,r);if(e=t.e,n=t.d.length-1,l=e>=n,s=u.s,l){if((n=d<0?-d:d)<=ao){for(i=new h(qe),e=Math.ceil(r/de+4),fe=!1;n%2&&(i=i.times(u),ps(i.d,e)),n=fn(n/2),n!==0;)u=u.times(u),ps(u.d,e);return fe=!0,t.s<0?new h(qe).div(i):ce(i,r)}}else if(s<0)throw Error(Ye+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,fe=!1,i=t.times($n(u,r+f)),fe=!0,i=co(i),i.s=s,i};M.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=ye(i),r=Xt(i,n<=s.toExpNeg||n>=s.toExpPos)):(at(t,1,dn),e===void 0?e=s.rounding:at(e,0,8),i=ce(new s(i),t,e),n=ye(i),r=Xt(i,t<=n||n<=s.toExpNeg,t)),r};M.toSignificantDigits=M.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(at(t,1,dn),e===void 0?e=r.rounding:at(e,0,8)),ce(new r(n),t,e)};M.toString=M.valueOf=M.val=M.toJSON=M[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ye(t),n=t.constructor;return Xt(t,e<=n.toExpNeg||e>=n.toExpPos)};function lo(t,e){var n,r,i,s,l,u,h,f,d=t.constructor,m=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),fe?ce(e,m):e;if(h=t.d,f=e.d,l=t.e,i=e.e,h=h.slice(),s=l-i,s){for(s<0?(r=h,s=-s,u=f.length):(r=f,i=l,u=h.length),l=Math.ceil(m/de),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=h.length,s=f.length,u-s<0&&(s=u,r=f,f=h,h=r),n=0;s;)n=(h[--s]=h[s]+f[s]+n)/Te|0,h[s]%=Te;for(n&&(h.unshift(n),++i),u=h.length;h[--u]==0;)h.pop();return e.d=h,e.e=i,fe?ce(e,m):e}function at(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Yt+t)}function nt(t){var e,n,r,i=t.length-1,s="",l=t[0];if(i>0){for(s+=l,e=1;e<i;e++)r=t[e]+"",n=de-r.length,n&&(s+=It(n)),s+=r;l=t[e],r=l+"",n=de-r.length,n&&(s+=It(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var bt=function(){function t(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%Te|0,l=s/Te|0;return l&&r.unshift(l),r}function e(r,i,s,l){var u,h;if(s!=l)h=s>l?1:-1;else for(u=h=0;u<s;u++)if(r[u]!=i[u]){h=r[u]>i[u]?1:-1;break}return h}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*Te+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,h,f,d,m,A,P,X,H,k,ue,ae,se,Se,be,Ze,Ae,Fe,Ve=r.constructor,ct=r.s==i.s?1:-1,ke=r.d,le=i.d;if(!r.s)return new Ve(r);if(!i.s)throw Error(Ye+"Division by zero");for(h=r.e-i.e,Ae=le.length,be=ke.length,P=new Ve(ct),X=P.d=[],f=0;le[f]==(ke[f]||0);)++f;if(le[f]>(ke[f]||0)&&--h,s==null?ae=s=Ve.precision:l?ae=s+(ye(r)-ye(i))+1:ae=s,ae<0)return new Ve(0);if(ae=ae/de+2|0,f=0,Ae==1)for(d=0,le=le[0],ae++;(f<be||d)&&ae--;f++)se=d*Te+(ke[f]||0),X[f]=se/le|0,d=se%le|0;else{for(d=Te/(le[0]+1)|0,d>1&&(le=t(le,d),ke=t(ke,d),Ae=le.length,be=ke.length),Se=Ae,H=ke.slice(0,Ae),k=H.length;k<Ae;)H[k++]=0;Fe=le.slice(),Fe.unshift(0),Ze=le[0],le[1]>=Te/2&&++Ze;do d=0,u=e(le,H,Ae,k),u<0?(ue=H[0],Ae!=k&&(ue=ue*Te+(H[1]||0)),d=ue/Ze|0,d>1?(d>=Te&&(d=Te-1),m=t(le,d),A=m.length,k=H.length,u=e(m,H,A,k),u==1&&(d--,n(m,Ae<A?Fe:le,A))):(d==0&&(u=d=1),m=le.slice()),A=m.length,A<k&&m.unshift(0),n(H,m,k),u==-1&&(k=H.length,u=e(le,H,Ae,k),u<1&&(d++,n(H,Ae<k?Fe:le,k))),k=H.length):u===0&&(d++,H=[0]),X[f++]=d,u&&H[0]?H[k++]=ke[Se]||0:(H=[ke[Se]],k=1);while((Se++<be||H[0]!==void 0)&&ae--)}return X[0]||X.shift(),P.e=h,ce(P,l?s+ye(P)+1:s)}}();function co(t,e){var n,r,i,s,l,u,h=0,f=0,d=t.constructor,m=d.precision;if(ye(t)>16)throw Error(Gi+ye(t));if(!t.s)return new d(qe);for(fe=!1,u=m,l=new d(.03125);t.abs().gte(.1);)t=t.times(l),f+=5;for(r=Math.log(Ft(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new d(qe),d.precision=u;;){if(i=ce(i.times(t),u),n=n.times(++h),l=s.plus(bt(i,n,u)),nt(l.d).slice(0,u)===nt(s.d).slice(0,u)){for(;f--;)s=ce(s.times(s),u);return d.precision=m,e==null?(fe=!0,ce(s,m)):s}s=l}}function ye(t){for(var e=t.e*de,n=t.d[0];n>=10;n/=10)e++;return e}function ui(t,e,n){if(e>t.LN10.sd())throw fe=!0,n&&(t.precision=n),Error(Ye+"LN10 precision limit exceeded");return ce(new t(t.LN10),e)}function It(t){for(var e="";t--;)e+="0";return e}function $n(t,e){var n,r,i,s,l,u,h,f,d,m=1,A=10,P=t,X=P.d,H=P.constructor,k=H.precision;if(P.s<1)throw Error(Ye+(P.s?"NaN":"-Infinity"));if(P.eq(qe))return new H(0);if(e==null?(fe=!1,f=k):f=e,P.eq(10))return e==null&&(fe=!0),ui(H,f);if(f+=A,H.precision=f,n=nt(X),r=n.charAt(0),s=ye(P),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)P=P.times(t),n=nt(P.d),r=n.charAt(0),m++;s=ye(P),r>1?(P=new H("0."+n),s++):P=new H(r+"."+n.slice(1))}else return h=ui(H,f+2,k).times(s+""),P=$n(new H(r+"."+n.slice(1)),f-A).plus(h),H.precision=k,e==null?(fe=!0,ce(P,k)):P;for(u=l=P=bt(P.minus(qe),P.plus(qe),f),d=ce(P.times(P),f),i=3;;){if(l=ce(l.times(d),f),h=u.plus(bt(l,new H(i),f)),nt(h.d).slice(0,f)===nt(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(ui(H,f+2,k).times(s+""))),u=bt(u,new H(m),f),H.precision=k,e==null?(fe=!0,ce(u,k)):u;u=h,i+=2}}function hs(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=fn(n/de),t.d=[],r=(n+1)%de,n<0&&(r+=de),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=de;r<i;)t.d.push(+e.slice(r,r+=de));e=e.slice(r),r=de-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),fe&&(t.e>Pr||t.e<-Pr))throw Error(Gi+n)}else t.s=0,t.e=0,t.d=[0];return t}function ce(t,e,n){var r,i,s,l,u,h,f,d,m=t.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=e-l,r<0)r+=de,i=e,f=m[d=0];else{if(d=Math.ceil((r+1)/de),s=m.length,d>=s)return t;for(f=s=m[d],l=1;s>=10;s/=10)l++;r%=de,i=r-de+l}if(n!==void 0&&(s=Ft(10,l-i-1),u=f/s%10|0,h=e<0||m[d+1]!==void 0||f%s,h=n<4?(u||h)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||h||n==6&&(r>0?i>0?f/Ft(10,l-i):0:m[d-1])%10&1||n==(t.s<0?8:7))),e<1||!m[0])return h?(s=ye(t),m.length=1,e=e-s-1,m[0]=Ft(10,(de-e%de)%de),t.e=fn(-e/de)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=d,s=1,d--):(m.length=d+1,s=Ft(10,de-r),m[d]=i>0?(f/Ft(10,l-i)%Ft(10,i)|0)*s:0),h)for(;;)if(d==0){(m[0]+=s)==Te&&(m[0]=1,++t.e);break}else{if(m[d]+=s,m[d]!=Te)break;m[d--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(fe&&(t.e>Pr||t.e<-Pr))throw Error(Gi+ye(t));return t}function uo(t,e){var n,r,i,s,l,u,h,f,d,m,A=t.constructor,P=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),fe?ce(e,P):e;if(h=t.d,m=e.d,r=e.e,f=t.e,h=h.slice(),l=f-r,l){for(d=l<0,d?(n=h,l=-l,u=m.length):(n=m,r=f,u=h.length),i=Math.max(Math.ceil(P/de),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=h.length,u=m.length,d=i<u,d&&(u=i),i=0;i<u;i++)if(h[i]!=m[i]){d=h[i]<m[i];break}l=0}for(d&&(n=h,h=m,m=n,e.s=-e.s),u=h.length,i=m.length-u;i>0;--i)h[u++]=0;for(i=m.length;i>l;){if(h[--i]<m[i]){for(s=i;s&&h[--s]===0;)h[s]=Te-1;--h[s],h[i]+=Te}h[i]-=m[i]}for(;h[--u]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(e.d=h,e.e=r,fe?ce(e,P):e):new A(0)}function Xt(t,e,n){var r,i=ye(t),s=nt(t.d),l=s.length;return e?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+It(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+It(-i-1)+s,n&&(r=n-l)>0&&(s+=It(r))):i>=l?(s+=It(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+It(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=It(r))),t.s<0?"-"+s:s}function ps(t,e){if(t.length>e)return t.length=e,!0}function fo(t){var e,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Yt+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return hs(l,s.toString())}else if(typeof s!="string")throw Error(Yt+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,Zu.test(s))hs(l,s);else throw Error(Yt+s)}if(i.prototype=M,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=fo,i.config=i.set=Fu,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Fu(t){if(!t||typeof t!="object")throw Error(Ye+"Object expected");var e,n,r,i=["precision",1,dn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(fn(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Yt+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Yt+n+": "+r);return this}var ho=fo(Cu);qe=new ho(1);var E;(function(t){t.AED="aed",t.AFN="afn",t.ALL="all",t.AMD="amd",t.ANG="ang",t.AOA="aoa",t.ARS="ars",t.AUD="aud",t.AWG="awg",t.AZN="azn",t.BAM="bam",t.BBD="bbd",t.BDT="bdt",t.BGN="bgn",t.BHD="bhd",t.BIF="bif",t.BMD="bmd",t.BND="bnd",t.BOB="bob",t.BOV="bov",t.BRL="brl",t.BSD="bsd",t.BTN="btn",t.BWP="bwp",t.BYN="byn",t.BYR="byr",t.BZD="bzd",t.CAD="cad",t.CDF="cdf",t.CHE="che",t.CHF="chf",t.CHW="chw",t.CLF="clf",t.CLP="clp",t.CNY="cny",t.COP="cop",t.COU="cou",t.CRC="crc",t.CUC="cuc",t.CUP="cup",t.CVE="cve",t.CZK="czk",t.DJF="djf",t.DKK="dkk",t.DOP="dop",t.DZD="dzd",t.EGP="egp",t.ERN="ern",t.ETB="etb",t.EUR="eur",t.FJD="fjd",t.FKP="fkp",t.GBP="gbp",t.GEL="gel",t.GHS="ghs",t.GIP="gip",t.GMD="gmd",t.GNF="gnf",t.GTQ="gtq",t.GYD="gyd",t.HKD="hkd",t.HNL="hnl",t.HRK="hrk",t.HTG="htg",t.HUF="huf",t.IDR="idr",t.ILS="ils",t.INR="inr",t.IQD="iqd",t.IRR="irr",t.ISK="isk",t.JMD="jmd",t.JOD="jod",t.JPY="jpy",t.KES="kes",t.KGS="kgs",t.KHR="khr",t.KMF="kmf",t.KPW="kpw",t.KRW="krw",t.KWD="kwd",t.KYD="kyd",t.KZT="kzt",t.LAK="lak",t.LBP="lbp",t.LKR="lkr",t.LRD="lrd",t.LSL="lsl",t.LTL="ltl",t.LVL="lvl",t.LYD="lyd",t.MAD="mad",t.MDL="mdl",t.MGA="mga",t.MKD="mkd",t.MMK="mmk",t.MNT="mnt",t.MOP="mop",t.MRO="mro",t.MUR="mur",t.MVR="mvr",t.MWK="mwk",t.MXN="mxn",t.MXV="mxv",t.MYR="myr",t.MZN="mzn",t.NAD="nad",t.NGN="ngn",t.NIO="nio",t.NOK="nok",t.NPR="npr",t.NZD="nzd",t.OMR="omr",t.PAB="pab",t.PEN="pen",t.PGK="pgk",t.PHP="php",t.PKR="pkr",t.PLN="pln",t.PYG="pyg",t.QAR="qar",t.RON="ron",t.RSD="rsd",t.RUB="rub",t.RWF="rwf",t.SAR="sar",t.SBD="sbd",t.SCR="scr",t.SDG="sdg",t.SEK="sek",t.SGD="sgd",t.SHP="shp",t.SLL="sll",t.SOS="sos",t.SRD="srd",t.SSP="ssp",t.STD="std",t.SVC="svc",t.SYP="syp",t.SZL="szl",t.THB="thb",t.TJS="tjs",t.TMT="tmt",t.TND="tnd",t.TOP="top",t.TRY="try",t.TTD="ttd",t.TWD="twd",t.TZS="tzs",t.UAH="uah",t.UGX="ugx",t.USD="usd",t.USN="usn",t.USS="uss",t.UYI="uyi",t.UYU="uyu",t.UZS="uzs",t.VEF="vef",t.VND="vnd",t.VUV="vuv",t.WST="wst",t.XAF="xaf",t.XAG="xag",t.XAU="xau",t.XBA="xba",t.XBB="xbb",t.XBC="xbc",t.XBD="xbd",t.XCD="xcd",t.XDR="xdr",t.XFU="xfu",t.XOF="xof",t.XPD="xpd",t.XPF="xpf",t.XPT="xpt",t.XSU="xsu",t.XTS="xts",t.XUA="xua",t.YER="yer",t.ZAR="zar",t.ZMW="zmw",t.ZWL="zwl"})(E||(E={}));E.AED+"",E.AFN+"",E.ALL+"",E.AMD+"",E.ANG+"",E.AOA+"",E.ARS+"",E.AUD+"",E.AWG+"",E.AZN+"",E.BAM+"",E.BBD+"",E.BDT+"",E.BGN+"",E.BHD+"",E.BIF+"",E.BMD+"",E.BND+"",E.BOB+"",E.BOV+"",E.BRL+"",E.BSD+"",E.BTN+"",E.BWP+"",E.BYR+"",E.BYN+"",E.BZD+"",E.CAD+"",E.CDF+"",E.CHE+"",E.CHF+"",E.CHW+"",E.CLF+"",E.CLP+"",E.CNY+"",E.COP+"",E.COU+"",E.CRC+"",E.CUC+"",E.CUP+"",E.CVE+"",E.CZK+"",E.DJF+"",E.DKK+"",E.DOP+"",E.DZD+"",E.EGP+"",E.ERN+"",E.ETB+"",E.EUR+"",E.FJD+"",E.FKP+"",E.GBP+"",E.GEL+"",E.GHS+"",E.GIP+"",E.GMD+"",E.GNF+"",E.GTQ+"",E.GYD+"",E.HKD+"",E.HNL+"",E.HRK+"",E.HTG+"",E.HUF+"",E.IDR+"",E.ILS+"",E.INR+"",E.IQD+"",E.IRR+"",E.ISK+"",E.JMD+"",E.JOD+"",E.JPY+"",E.KES+"",E.KGS+"",E.KHR+"",E.KMF+"",E.KPW+"",E.KRW+"",E.KWD+"",E.KYD+"",E.KZT+"",E.LAK+"",E.LBP+"",E.LKR+"",E.LRD+"",E.LSL+"",E.LTL+"",E.LVL+"",E.LYD+"",E.MAD+"",E.MDL+"",E.MGA+"",E.MKD+"",E.MMK+"",E.MNT+"",E.MOP+"",E.MRO+"",E.MUR+"",E.MVR+"",E.MWK+"",E.MXN+"",E.MXV+"",E.MYR+"",E.MZN+"",E.NAD+"",E.NGN+"",E.NIO+"",E.NOK+"",E.NPR+"",E.NZD+"",E.OMR+"",E.PAB+"",E.PEN+"",E.PGK+"",E.PHP+"",E.PKR+"",E.PLN+"",E.PYG+"",E.QAR+"",E.RON+"",E.RSD+"",E.RUB+"",E.RWF+"",E.SAR+"",E.SBD+"",E.SCR+"",E.SDG+"",E.SEK+"",E.SGD+"",E.SHP+"",E.SLL+"",E.SOS+"",E.SRD+"",E.SSP+"",E.STD+"",E.SVC+"",E.SYP+"",E.SZL+"",E.THB+"",E.TJS+"",E.TMT+"",E.TND+"",E.TOP+"",E.TRY+"",E.TTD+"",E.TWD+"",E.TZS+"",E.UAH+"",E.UGX+"",E.USD+"",E.USN+"",E.USS+"",E.UYI+"",E.UYU+"",E.UZS+"",E.VEF+"",E.VND+"",E.VUV+"",E.WST+"",E.XAF+"",E.XAG+"",E.XAU+"",E.XBA+"",E.XBB+"",E.XBC+"",E.XBD+"",E.XCD+"",E.XDR+"",E.XFU+"",E.XOF+"",E.XPD+"",E.XPF+"",E.XPT+"",E.XSU+"",E.XTS+"",E.XUA+"",E.YER+"",E.ZAR+"",E.ZMW+"",E.ZWL+"";var On={exports:{}};On.exports;var gs;function ju(){return gs||(gs=1,function(t,e){var n=200,r="Expected a function",i="__lodash_hash_undefined__",s=1,l=2,u=9007199254740991,h="[object Arguments]",f="[object Array]",d="[object Boolean]",m="[object Date]",A="[object Error]",P="[object Function]",X="[object GeneratorFunction]",H="[object Map]",k="[object Number]",ue="[object Object]",ae="[object Promise]",se="[object RegExp]",Se="[object Set]",be="[object String]",Ze="[object Symbol]",Ae="[object WeakMap]",Fe="[object ArrayBuffer]",Ve="[object DataView]",ct="[object Float32Array]",ke="[object Float64Array]",le="[object Int8Array]",Zr="[object Int16Array]",Wn="[object Int32Array]",Xn="[object Uint8Array]",Fr="[object Uint8ClampedArray]",jr="[object Uint16Array]",Jn="[object Uint32Array]",ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dt=/^\w*$/,Qn=/^\./,pn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ze=/[\\^$.*+?()[\]{}|]/g,Vt=/\\(\\)?/g,ft=/^\[object .+?Constructor\]$/,er=/^(?:0|[1-9]\d*)$/,oe={};oe[ct]=oe[ke]=oe[le]=oe[Zr]=oe[Wn]=oe[Xn]=oe[Fr]=oe[jr]=oe[Jn]=!0,oe[h]=oe[f]=oe[Fe]=oe[d]=oe[Ve]=oe[m]=oe[A]=oe[P]=oe[H]=oe[k]=oe[ue]=oe[se]=oe[Se]=oe[be]=oe[Ae]=!1;var Jt=typeof mr=="object"&&mr&&mr.Object===Object&&mr,Kr=typeof self=="object"&&self&&self.Object===Object&&self,He=Jt||Kr||Function("return this")(),gn=e&&!e.nodeType&&e,mn=gn&&!0&&t&&!t.nodeType&&t,_n=mn&&mn.exports===gn,vn=_n&&Jt.process,tr=function(){try{return vn&&vn.binding("util")}catch{}}(),nr=tr&&tr.isTypedArray;function $r(a,p){for(var S=-1,R=a?a.length:0;++S<R&&p(a[S],S,a)!==!1;);return a}function rr(a,p){for(var S=-1,R=a?a.length:0;++S<R;)if(p(a[S],S,a))return!0;return!1}function Yr(a){return function(p){return p==null?void 0:p[a]}}function Ht(a,p){for(var S=-1,R=Array(a);++S<a;)R[S]=p(S);return R}function ir(a){return function(p){return a(p)}}function sr(a,p){return a==null?void 0:a[p]}function yn(a){var p=!1;if(a!=null&&typeof a.toString!="function")try{p=!!(a+"")}catch{}return p}function Z(a){var p=-1,S=Array(a.size);return a.forEach(function(R,Y){S[++p]=[Y,R]}),S}function et(a,p){return function(S){return a(p(S))}}function o(a){var p=-1,S=Array(a.size);return a.forEach(function(R){S[++p]=R}),S}var c=Array.prototype,g=Function.prototype,y=Object.prototype,T=He["__core-js_shared__"],b=function(){var a=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),N=g.toString,w=y.hasOwnProperty,I=y.toString,j=RegExp("^"+N.call(w).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=He.Symbol,$=He.Uint8Array,ie=et(Object.getPrototypeOf,Object),Le=Object.create,Ie=y.propertyIsEnumerable,En=c.splice,bn=et(Object.keys,Object),zr=Qt(He,"DataView"),Tn=Qt(He,"Map"),Wr=Qt(He,"Promise"),Xr=Qt(He,"Set"),Jr=Qt(He,"WeakMap"),Sn=Qt(Object,"create"),Mo=Ct(zr),Uo=Ct(Tn),Bo=Ct(Wr),Go=Ct(Xr),Vo=Ct(Jr),or=J?J.prototype:void 0,Qr=or?or.valueOf:void 0,ji=or?or.toString:void 0;function qt(a){var p=-1,S=a?a.length:0;for(this.clear();++p<S;){var R=a[p];this.set(R[0],R[1])}}function Ho(){this.__data__=Sn?Sn(null):{}}function qo(a){return this.has(a)&&delete this.__data__[a]}function Co(a){var p=this.__data__;if(Sn){var S=p[a];return S===i?void 0:S}return w.call(p,a)?p[a]:void 0}function Zo(a){var p=this.__data__;return Sn?p[a]!==void 0:w.call(p,a)}function Fo(a,p){var S=this.__data__;return S[a]=Sn&&p===void 0?i:p,this}qt.prototype.clear=Ho,qt.prototype.delete=qo,qt.prototype.get=Co,qt.prototype.has=Zo,qt.prototype.set=Fo;function ht(a){var p=-1,S=a?a.length:0;for(this.clear();++p<S;){var R=a[p];this.set(R[0],R[1])}}function jo(){this.__data__=[]}function Ko(a){var p=this.__data__,S=lr(p,a);if(S<0)return!1;var R=p.length-1;return S==R?p.pop():En.call(p,S,1),!0}function $o(a){var p=this.__data__,S=lr(p,a);return S<0?void 0:p[S][1]}function Yo(a){return lr(this.__data__,a)>-1}function zo(a,p){var S=this.__data__,R=lr(S,a);return R<0?S.push([a,p]):S[R][1]=p,this}ht.prototype.clear=jo,ht.prototype.delete=Ko,ht.prototype.get=$o,ht.prototype.has=Yo,ht.prototype.set=zo;function pt(a){var p=-1,S=a?a.length:0;for(this.clear();++p<S;){var R=a[p];this.set(R[0],R[1])}}function Wo(){this.__data__={hash:new qt,map:new(Tn||ht),string:new qt}}function Xo(a){return cr(this,a).delete(a)}function Jo(a){return cr(this,a).get(a)}function Qo(a){return cr(this,a).has(a)}function ea(a,p){return cr(this,a).set(a,p),this}pt.prototype.clear=Wo,pt.prototype.delete=Xo,pt.prototype.get=Jo,pt.prototype.has=Qo,pt.prototype.set=ea;function ar(a){var p=-1,S=a?a.length:0;for(this.__data__=new pt;++p<S;)this.add(a[p])}function ta(a){return this.__data__.set(a,i),this}function na(a){return this.__data__.has(a)}ar.prototype.add=ar.prototype.push=ta,ar.prototype.has=na;function gt(a){this.__data__=new ht(a)}function ra(){this.__data__=new ht}function ia(a){return this.__data__.delete(a)}function sa(a){return this.__data__.get(a)}function oa(a){return this.__data__.has(a)}function aa(a,p){var S=this.__data__;if(S instanceof ht){var R=S.__data__;if(!Tn||R.length<n-1)return R.push([a,p]),this;S=this.__data__=new pt(R)}return S.set(a,p),this}gt.prototype.clear=ra,gt.prototype.delete=ia,gt.prototype.get=sa,gt.prototype.has=oa,gt.prototype.set=aa;function la(a,p){var S=mt(a)||Qi(a)?Ht(a.length,String):[],R=S.length,Y=!!R;for(var B in a)w.call(a,B)&&!(Y&&(B=="length"||zi(B,R)))&&S.push(B);return S}function lr(a,p){for(var S=a.length;S--;)if(Ji(a[S][0],p))return S;return-1}function ca(a){return en(a)?Le(a):{}}var ua=Aa();function da(a,p){return a&&ua(a,p,hr)}function Ki(a,p){p=ur(p,a)?[p]:$i(p);for(var S=0,R=p.length;a!=null&&S<R;)a=a[dr(p[S++])];return S&&S==R?a:void 0}function fa(a){return I.call(a)}function ha(a,p){return a!=null&&p in Object(a)}function ei(a,p,S,R,Y){return a===p?!0:a==null||p==null||!en(a)&&!fr(p)?a!==a&&p!==p:pa(a,p,ei,S,R,Y)}function pa(a,p,S,R,Y,B){var Q=mt(a),ge=mt(p),pe=f,Oe=f;Q||(pe=wt(a),pe=pe==h?ue:pe),ge||(Oe=wt(p),Oe=Oe==h?ue:Oe);var Me=pe==ue&&!yn(a),Ue=Oe==ue&&!yn(p),De=pe==Oe;if(De&&!Me)return B||(B=new gt),Q||ts(a)?Yi(a,p,S,R,Y,B):wa(a,p,pe,S,R,Y,B);if(!(Y&l)){var je=Me&&w.call(a,"__wrapped__"),Ke=Ue&&w.call(p,"__wrapped__");if(je||Ke){var Nt=je?a.value():a,_t=Ke?p.value():p;return B||(B=new gt),S(Nt,_t,R,Y,B)}}return De?(B||(B=new gt),Na(a,p,S,R,Y,B)):!1}function ga(a,p,S,R){var Y=S.length,B=Y;if(a==null)return!B;for(a=Object(a);Y--;){var Q=S[Y];if(Q[2]?Q[1]!==a[Q[0]]:!(Q[0]in a))return!1}for(;++Y<B;){Q=S[Y];var ge=Q[0],pe=a[ge],Oe=Q[1];if(Q[2]){if(pe===void 0&&!(ge in a))return!1}else{var Me=new gt,Ue;if(!(Ue===void 0?ei(Oe,pe,R,s|l,Me):Ue))return!1}}return!0}function ma(a){if(!en(a)||xa(a))return!1;var p=ni(a)||yn(a)?j:ft;return p.test(Ct(a))}function _a(a){return fr(a)&&ri(a.length)&&!!oe[I.call(a)]}function va(a){return typeof a=="function"?a:a==null?Ga:typeof a=="object"?mt(a)?ba(a[0],a[1]):Ea(a):Va(a)}function ya(a){if(!ka(a))return bn(a);var p=[];for(var S in Object(a))w.call(a,S)&&S!="constructor"&&p.push(S);return p}function Ea(a){var p=Ia(a);return p.length==1&&p[0][2]?Xi(p[0][0],p[0][1]):function(S){return S===a||ga(S,a,p)}}function ba(a,p){return ur(a)&&Wi(p)?Xi(dr(a),p):function(S){var R=Ma(S,a);return R===void 0&&R===p?Ua(S,a):ei(p,R,void 0,s|l)}}function Ta(a){return function(p){return Ki(p,a)}}function Sa(a){if(typeof a=="string")return a;if(ii(a))return ji?ji.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}function $i(a){return mt(a)?a:La(a)}function Aa(a){return function(p,S,R){for(var Y=-1,B=Object(p),Q=R(p),ge=Q.length;ge--;){var pe=Q[++Y];if(S(B[pe],pe,B)===!1)break}return p}}function Yi(a,p,S,R,Y,B){var Q=Y&l,ge=a.length,pe=p.length;if(ge!=pe&&!(Q&&pe>ge))return!1;var Oe=B.get(a);if(Oe&&B.get(p))return Oe==p;var Me=-1,Ue=!0,De=Y&s?new ar:void 0;for(B.set(a,p),B.set(p,a);++Me<ge;){var je=a[Me],Ke=p[Me];if(R)var Nt=Q?R(Ke,je,Me,p,a,B):R(je,Ke,Me,a,p,B);if(Nt!==void 0){if(Nt)continue;Ue=!1;break}if(De){if(!rr(p,function(_t,Zt){if(!De.has(Zt)&&(je===_t||S(je,_t,R,Y,B)))return De.add(Zt)})){Ue=!1;break}}else if(!(je===Ke||S(je,Ke,R,Y,B))){Ue=!1;break}}return B.delete(a),B.delete(p),Ue}function wa(a,p,S,R,Y,B,Q){switch(S){case Ve:if(a.byteLength!=p.byteLength||a.byteOffset!=p.byteOffset)return!1;a=a.buffer,p=p.buffer;case Fe:return!(a.byteLength!=p.byteLength||!R(new $(a),new $(p)));case d:case m:case k:return Ji(+a,+p);case A:return a.name==p.name&&a.message==p.message;case se:case be:return a==p+"";case H:var ge=Z;case Se:var pe=B&l;if(ge||(ge=o),a.size!=p.size&&!pe)return!1;var Oe=Q.get(a);if(Oe)return Oe==p;B|=s,Q.set(a,p);var Me=Yi(ge(a),ge(p),R,Y,B,Q);return Q.delete(a),Me;case Ze:if(Qr)return Qr.call(a)==Qr.call(p)}return!1}function Na(a,p,S,R,Y,B){var Q=Y&l,ge=hr(a),pe=ge.length,Oe=hr(p),Me=Oe.length;if(pe!=Me&&!Q)return!1;for(var Ue=pe;Ue--;){var De=ge[Ue];if(!(Q?De in p:w.call(p,De)))return!1}var je=B.get(a);if(je&&B.get(p))return je==p;var Ke=!0;B.set(a,p),B.set(p,a);for(var Nt=Q;++Ue<pe;){De=ge[Ue];var _t=a[De],Zt=p[De];if(R)var ns=Q?R(Zt,_t,De,p,a,B):R(_t,Zt,De,a,p,B);if(!(ns===void 0?_t===Zt||S(_t,Zt,R,Y,B):ns)){Ke=!1;break}Nt||(Nt=De=="constructor")}if(Ke&&!Nt){var pr=a.constructor,gr=p.constructor;pr!=gr&&"constructor"in a&&"constructor"in p&&!(typeof pr=="function"&&pr instanceof pr&&typeof gr=="function"&&gr instanceof gr)&&(Ke=!1)}return B.delete(a),B.delete(p),Ke}function cr(a,p){var S=a.__data__;return Ra(p)?S[typeof p=="string"?"string":"hash"]:S.map}function Ia(a){for(var p=hr(a),S=p.length;S--;){var R=p[S],Y=a[R];p[S]=[R,Y,Wi(Y)]}return p}function Qt(a,p){var S=sr(a,p);return ma(S)?S:void 0}var wt=fa;(zr&&wt(new zr(new ArrayBuffer(1)))!=Ve||Tn&&wt(new Tn)!=H||Wr&&wt(Wr.resolve())!=ae||Xr&&wt(new Xr)!=Se||Jr&&wt(new Jr)!=Ae)&&(wt=function(a){var p=I.call(a),S=p==ue?a.constructor:void 0,R=S?Ct(S):void 0;if(R)switch(R){case Mo:return Ve;case Uo:return H;case Bo:return ae;case Go:return Se;case Vo:return Ae}return p});function Oa(a,p,S){p=ur(p,a)?[p]:$i(p);for(var R,Y=-1,Q=p.length;++Y<Q;){var B=dr(p[Y]);if(!(R=a!=null&&S(a,B)))break;a=a[B]}if(R)return R;var Q=a?a.length:0;return!!Q&&ri(Q)&&zi(B,Q)&&(mt(a)||Qi(a))}function zi(a,p){return p=p??u,!!p&&(typeof a=="number"||er.test(a))&&a>-1&&a%1==0&&a<p}function ur(a,p){if(mt(a))return!1;var S=typeof a;return S=="number"||S=="symbol"||S=="boolean"||a==null||ii(a)?!0:dt.test(a)||!ut.test(a)||p!=null&&a in Object(p)}function Ra(a){var p=typeof a;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?a!=="__proto__":a===null}function xa(a){return!!b&&b in a}function ka(a){var p=a&&a.constructor,S=typeof p=="function"&&p.prototype||y;return a===S}function Wi(a){return a===a&&!en(a)}function Xi(a,p){return function(S){return S==null?!1:S[a]===p&&(p!==void 0||a in Object(S))}}var La=ti(function(a){a=Pa(a);var p=[];return Qn.test(a)&&p.push(""),a.replace(pn,function(S,R,Y,B){p.push(Y?B.replace(Vt,"$1"):R||S)}),p});function dr(a){if(typeof a=="string"||ii(a))return a;var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}function Ct(a){if(a!=null){try{return N.call(a)}catch{}try{return a+""}catch{}}return""}function ti(a,p){if(typeof a!="function"||p&&typeof p!="function")throw new TypeError(r);var S=function(){var R=arguments,Y=p?p.apply(this,R):R[0],B=S.cache;if(B.has(Y))return B.get(Y);var Q=a.apply(this,R);return S.cache=B.set(Y,Q),Q};return S.cache=new(ti.Cache||pt),S}ti.Cache=pt;function Ji(a,p){return a===p||a!==a&&p!==p}function Qi(a){return Da(a)&&w.call(a,"callee")&&(!Ie.call(a,"callee")||I.call(a)==h)}var mt=Array.isArray;function es(a){return a!=null&&ri(a.length)&&!ni(a)}function Da(a){return fr(a)&&es(a)}function ni(a){var p=en(a)?I.call(a):"";return p==P||p==X}function ri(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=u}function en(a){var p=typeof a;return!!a&&(p=="object"||p=="function")}function fr(a){return!!a&&typeof a=="object"}function ii(a){return typeof a=="symbol"||fr(a)&&I.call(a)==Ze}var ts=nr?ir(nr):_a;function Pa(a){return a==null?"":Sa(a)}function Ma(a,p,S){var R=a==null?void 0:Ki(a,p);return R===void 0?S:R}function Ua(a,p){return a!=null&&Oa(a,p,ha)}function hr(a){return es(a)?la(a):ya(a)}function Ba(a,p,S){var R=mt(a)||ts(a);if(p=va(p),S==null)if(R||en(a)){var Y=a.constructor;R?S=mt(a)?new Y:[]:S=ni(Y)?ca(ie(a)):{}}else S={};return(R?$r:da)(a,function(B,Q,ge){return p(S,B,Q,ge)}),S}function Ga(a){return a}function Va(a){return ur(a)?Yr(dr(a)):Ta(a)}t.exports=Ba}(On,On.exports)),On.exports}ju();const lt=Object.create(null);lt.open="0";lt.close="1";lt.ping="2";lt.pong="3";lt.message="4";lt.upgrade="5";lt.noop="6";const Tr=Object.create(null);Object.keys(lt).forEach(t=>{Tr[lt[t]]=t});const Ai={type:"error",data:"parser error"},po=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",go=typeof ArrayBuffer=="function",mo=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Vi=({type:t,data:e},n,r)=>po&&e instanceof Blob?n?r(e):ms(e,r):go&&(e instanceof ArrayBuffer||mo(e))?n?r(e):ms(new Blob([e]),r):r(lt[t]+(e||"")),ms=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function _s(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let di;function Ku(t,e){if(po&&t.data instanceof Blob)return t.data.arrayBuffer().then(_s).then(e);if(go&&(t.data instanceof ArrayBuffer||mo(t.data)))return e(_s(t.data));Vi(t,!1,n=>{di||(di=new TextEncoder),e(di.encode(n))})}const vs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<vs.length;t++)Rn[vs.charCodeAt(t)]=t;const $u=t=>{let e=t.length*.75,n=t.length,r,i=0,s,l,u,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),d=new Uint8Array(f);for(r=0;r<n;r+=4)s=Rn[t.charCodeAt(r)],l=Rn[t.charCodeAt(r+1)],u=Rn[t.charCodeAt(r+2)],h=Rn[t.charCodeAt(r+3)],d[i++]=s<<2|l>>4,d[i++]=(l&15)<<4|u>>2,d[i++]=(u&3)<<6|h&63;return f},Yu=typeof ArrayBuffer=="function",Hi=(t,e)=>{if(typeof t!="string")return{type:"message",data:_o(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:zu(t.substring(1),e)}:Tr[n]?t.length>1?{type:Tr[n],data:t.substring(1)}:{type:Tr[n]}:Ai},zu=(t,e)=>{if(Yu){const n=$u(t);return _o(n,e)}else return{base64:!0,data:t}},_o=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},vo="",Wu=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,l)=>{Vi(s,!1,u=>{r[l]=u,++i===n&&e(r.join(vo))})})},Xu=(t,e)=>{const n=t.split(vo),r=[];for(let i=0;i<n.length;i++){const s=Hi(n[i],e);if(r.push(s),s.type==="error")break}return r};function Ju(){return new TransformStream({transform(t,e){Ku(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let fi;function Er(t){return t.reduce((e,n)=>e+n.length,0)}function br(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Qu(t,e){fi||(fi=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(l,u){for(n.push(l);;){if(r===0){if(Er(n)<1)break;const h=br(n,1);s=(h[0]&128)===128,i=h[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Er(n)<2)break;const h=br(n,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),r=3}else if(r===2){if(Er(n)<8)break;const h=br(n,8),f=new DataView(h.buffer,h.byteOffset,h.length),d=f.getUint32(0);if(d>Math.pow(2,21)-1){u.enqueue(Ai);break}i=d*Math.pow(2,32)+f.getUint32(4),r=3}else{if(Er(n)<i)break;const h=br(n,i);u.enqueue(Hi(s?h:fi.decode(h),e)),r=0}if(i===0||i>t){u.enqueue(Ai);break}}}})}const yo=4;function ve(t){if(t)return ed(t)}function ed(t){for(var e in ve.prototype)t[e]=ve.prototype[e];return t}ve.prototype.on=ve.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ve.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ve.prototype.off=ve.prototype.removeListener=ve.prototype.removeAllListeners=ve.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ve.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};ve.prototype.emitReserved=ve.prototype.emit;ve.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ve.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Vr=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),$e=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),td="arraybuffer";function Eo(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const nd=$e.setTimeout,rd=$e.clearTimeout;function Hr(t,e){e.useNativeTimers?(t.setTimeoutFn=nd.bind($e),t.clearTimeoutFn=rd.bind($e)):(t.setTimeoutFn=$e.setTimeout.bind($e),t.clearTimeoutFn=$e.clearTimeout.bind($e))}const id=1.33;function sd(t){return typeof t=="string"?od(t):Math.ceil((t.byteLength||t.size)*id)}function od(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function bo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ad(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function ld(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class cd extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class qi extends ve{constructor(e){super(),this.writable=!1,Hr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new cd(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Hi(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=ad(e);return n.length?"?"+n:""}}class ud extends qi{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Xu(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Wu(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=bo()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let To=!1;try{To=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dd=To;function fd(){}class hd extends ud{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class it extends ve{constructor(e,n,r){super(),this.createRequest=e,Hr(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Eo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=it.requestsCount++,it.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=fd,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete it.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}it.requestsCount=0;it.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ys);else if(typeof addEventListener=="function"){const t="onpagehide"in $e?"pagehide":"unload";addEventListener(t,ys,!1)}}function ys(){for(let t in it.requests)it.requests.hasOwnProperty(t)&&it.requests[t].abort()}const pd=function(){const t=So({xdomain:!1});return t&&t.responseType!==null}();class gd extends hd{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=pd&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new it(So,this.uri(),e)}}function So(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||dd))return new XMLHttpRequest}catch{}if(!e)try{return new $e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ao=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class md extends qi{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Ao?{}:Eo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Vi(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Vr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=bo()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const hi=$e.WebSocket||$e.MozWebSocket;class _d extends md{createSocket(e,n,r){return Ao?new hi(e,n,r):n?new hi(e,n):new hi(e)}doWrite(e,n){this.ws.send(n)}}class vd extends qi{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Qu(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Ju();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:u,value:h})=>{u||(this.onPacket(h),s())}).catch(u=>{})};s();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Vr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const yd={websocket:_d,webtransport:vd,polling:gd},Ed=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bd=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function wi(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Ed.exec(t||""),s={},l=14;for(;l--;)s[bd[l]]=i[l]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Td(s,s.path),s.queryKey=Sd(s,s.query),s}function Td(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Sd(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const Ni=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sr=[];Ni&&addEventListener("offline",()=>{Sr.forEach(t=>t())},!1);class kt extends ve{constructor(e,n){if(super(),this.binaryType=td,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=wi(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=wi(n.host).host);Hr(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ld(this.opts.query)),Ni&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=yo,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&kt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",kt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=sd(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Vr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(kt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ni&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Sr.indexOf(this._offlineEventListener);r!==-1&&Sr.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}kt.protocol=yo;class Ad extends kt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;kt.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;kt.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const A=new Error("probe error");A.transport=n.name,this.emitReserved("upgradeError",A)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const l=m=>{const A=new Error("probe error: "+m);A.transport=n.name,s(),this.emitReserved("upgradeError",A)};function u(){l("transport closed")}function h(){l("socket closed")}function f(m){n&&m.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",l),n.removeListener("close",u),this.off("close",h),this.off("upgrading",f)};n.once("open",i),n.once("error",l),n.once("close",u),this.once("close",h),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let wd=class extends Ad{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>yd[i]).filter(i=>!!i)),super(e,r)}};function Nd(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=wi(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Id=typeof ArrayBuffer=="function",Od=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,wo=Object.prototype.toString,Rd=typeof Blob=="function"||typeof Blob<"u"&&wo.call(Blob)==="[object BlobConstructor]",xd=typeof File=="function"||typeof File<"u"&&wo.call(File)==="[object FileConstructor]";function Ci(t){return Id&&(t instanceof ArrayBuffer||Od(t))||Rd&&t instanceof Blob||xd&&t instanceof File}function Ar(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ar(t[n]))return!0;return!1}if(Ci(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ar(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ar(t[n]))return!0;return!1}function kd(t){const e=[],n=t.data,r=t;return r.data=Ii(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Ii(t,e){if(!t)return t;if(Ci(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Ii(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Ii(t[r],e));return n}return t}function Ld(t,e){return t.data=Oi(t.data,e),delete t.attachments,t}function Oi(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Oi(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Oi(t[n],e));return t}const Dd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Pd=5;var ee;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ee||(ee={}));class Md{constructor(e){this.replacer=e}encode(e){return(e.type===ee.EVENT||e.type===ee.ACK)&&Ar(e)?this.encodeAsBinary({type:e.type===ee.EVENT?ee.BINARY_EVENT:ee.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ee.BINARY_EVENT||e.type===ee.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=kd(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Es(t){return Object.prototype.toString.call(t)==="[object Object]"}class Zi extends ve{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ee.BINARY_EVENT;r||n.type===ee.BINARY_ACK?(n.type=r?ee.EVENT:ee.ACK,this.reconstructor=new Ud(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ci(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ee[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ee.BINARY_EVENT||r.type===ee.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const l=e.substring(s,n);if(l!=Number(l)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const l=e.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Zi.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ee.CONNECT:return Es(n);case ee.DISCONNECT:return n===void 0;case ee.CONNECT_ERROR:return typeof n=="string"||Es(n);case ee.EVENT:case ee.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Dd.indexOf(n[0])===-1);case ee.ACK:case ee.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ud{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Ld(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Bd=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zi,Encoder:Md,get PacketType(){return ee},protocol:Pd},Symbol.toStringTag,{value:"Module"}));function We(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Gd=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class No extends ve{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[We(e,"open",this.onopen.bind(this)),We(e,"packet",this.onpacket.bind(this)),We(e,"error",this.onerror.bind(this)),We(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Gd.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:ee.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,m=n.pop();this._registerAckCallback(d,m),l.id=d}const u=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!u||(h?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);n.call(this,new Error("operation has timed out"))},i),l=(...u)=>{this.io.clearTimeoutFn(s),n.apply(this,u)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(l,u)=>l?i(l):r(u);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ee.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ee.EVENT:case ee.BINARY_EVENT:this.onevent(e);break;case ee.ACK:case ee.BINARY_ACK:this.onack(e);break;case ee.DISCONNECT:this.ondisconnect();break;case ee.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ee.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function hn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}hn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};hn.prototype.reset=function(){this.attempts=0};hn.prototype.setMin=function(t){this.ms=t};hn.prototype.setMax=function(t){this.max=t};hn.prototype.setJitter=function(t){this.jitter=t};class Ri extends ve{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Hr(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new hn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Bd;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new wd(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=We(n,"open",function(){r.onopen(),e&&e()}),s=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},l=We(n,"error",s);if(this._timeout!==!1){const u=this._timeout,h=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(We(e,"ping",this.onping.bind(this)),We(e,"data",this.ondata.bind(this)),We(e,"error",this.onerror.bind(this)),We(e,"close",this.onclose.bind(this)),We(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Vr(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new No(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const An={};function wr(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Nd(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,l=An[i]&&s in An[i].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let h;return u?h=new Ri(r,e):(An[i]||(An[i]=new Ri(r,e)),h=An[i]),n.query&&!e.query&&(e.query=n.queryKey),h.socket(n.path,e)}Object.assign(wr,{Manager:Ri,Socket:No,io:wr,connect:wr});const kn={flip:new Audio("/sounds/card_flip.mp3"),shuffle:new Audio("/sounds/card_shuffle.mp3"),move:new Audio("/sounds/move.mp3"),tick:new Audio("/sounds/clock_tick.mp3"),user:new Audio("/sounds/user.mp3"),goal:new Audio("/sounds/clapping.mp3"),start:new Audio("/sounds/gun.mp3")},Fi=new Audio("/sounds/bgm.mp3");let Io=!1;Fi.loop=!0;Fi.volume=.1;kn.tick.volume=.1;kn.flip.volume=.3;function Kt(t){kn[t]&&(kn[t].currentTime=0,kn[t].play().catch(e=>console.warn("🔇 사운드 재생 실패:",e)))}function Oo(){Fi.play().catch(()=>{console.warn("🔇 자동 재생 제한으로 배경음악 재생 실패")}),Io=!0}function Vd(){Io||Oo()}let Ro,me;const pi=new qu("1361227933670178916");function Hd(){me=wr({path:"/.proxy/socket",transports:["websocket"]}),me.on("connect",()=>{console.log("Connected to server:",me.id),jt("서버와 연결되었습니다. 즐거운 경마되세요.")}),me.on("connect_error",t=>{console.error("❌ Socket connection error:",t.message)}),me.on("disconnect",()=>{console.log("Disconnected from server:",me.id),jt("서버와 연결이 끊어졌습니다. 연결을 확인해주세요."),Ts()}),me.on("request_identity",async()=>{console.log("🔑 Requesting identity"),await Cr(),me.emit("identity_response",{userId:At,userName:Yn,avatars:Ot.avatar})}),me.on("game_started",()=>{xo(),Po({suit:"",value:""},0),Wd(),gi(3),Kt("start"),Oo()}),me.on("game_end",()=>{gi(10)}),me.on("message",({msg:t})=>{jt(t)}),me.on("card_drawn",({card:t,remaining:e,horsePositions:n})=>{Tt.currentHorsePositions=n,$d(t.suit),Yd(n),gi(3),Kt("flip"),Kt("move")}),me.on("suit_selection_request",()=>{Zd()}),me.on("suit_selected",({userId:t,userName:e,selectedSuit:n})=>{Tt.selectedSuits[t]=n,Nr(t,n),console.log("suit_selected",{userId:t,selectedSuit:n}),document.querySelector(".chat-container")&&jt(`${e}님이 ${qd[n]}를 선택했습니다.`)}),me.on("game_result",({scores:t,plusScores:e})=>{Object.entries(t).forEach(([n,r])=>{bs(n,r),n==At&&jt(Kd(e[n]))}),zd()}),me.on("game_reset",()=>{Ts()}),me.on("update_suit",({userId:t,selectedSuit:e})=>{Nr(t,e),Vd()}),me.on("user_informations",({liveUsers:t,userNames:e,userAvatars:n,userScores:r,selectedSuits:i})=>{t.forEach(s=>{const l=`https://cdn.discordapp.com/avatars/${s}/${n[s]}.png?size=256`;Lo(s,e[s],l),Nr(s,i[s]),bs(s,r[s])})}),me.on("user_disconnected",({userId:t})=>{Do(t),Kt("user")})}const Tt={selectedSuits:{},currentHorsePositions:{}};let wn=null,Ot=null,At=null,Yn=null;const qd={spades:"♠",hearts:"♥",diamonds:"♦",clubs:"♣"};jd().then(async()=>{console.log("Discord SDK authenticated"),document.querySelector("#app").innerHTML=`<div class="main-content">
  <div class="welcome-container" id="welcome-screen">
    <h1>🎲 트럼프 경마 게임에 오신 것을 환영합니다! 🏇</h1>
    <p>트럼프 카드를 이용한 독특한 경마 게임을 즐겨보세요!</p>
    <div id="user-info"></div>
    <div class="game-rules">
      <h2>게임 규칙</h2>
      <ul>
        <li>각 플레이어는 문양(♠, ♥, ♦, ♣)을 선택합니다</li>
        <li>카드를 뒤집어 나온 문양의 말이 전진합니다</li>
        <li>결승선에 먼저 도착하는 말의 주인이 승리합니다</li>
      </ul>
    </div>
    <button class="start-game-button" disabled>로그인 중...</button>
  </div>
  <div class="game-container" id="game-screen">
    <div class="game-board">
      <div class="card-area">
        <div class="deck-container">
          <div class="deck"></div>
          <div class="card-count" style="display: none;"></div>
        </div>
        <div class="drawn-card-container">
          <div class="drawn-card" style="display: none;"></div>
        </div>
      </div>
      <div class="race-tracks">
        <div class="track header-track">
          <div class="start-line"></div>
          <div class="finish-line"></div>
          <div class="track-line"></div>
          <div class="track-cards">
            <div class="track-card"></div>
<div class="track-card"></div>
<div class="track-card"></div>
<div class="track-card"></div>
<div class="track-card"></div>
<div class="track-card"></div>
          </div>
        </div>
        
        <div class="track">
          <div class="start-line"></div>
          <div class="finish-line"></div>
          <div class="track-line"></div>
          <div class="horse-card spades">A♠</div>
        </div>

        <div class="track">
          <div class="start-line"></div>
          <div class="finish-line"></div>
          <div class="track-line"></div>
          <div class="horse-card diamonds">A♦</div>
        </div>

        <div class="track">
          <div class="start-line"></div>
          <div class="finish-line"></div>
          <div class="track-line"></div>
          <div class="horse-card clubs">A♣</div>
        </div>

        <div class="track">
          <div class="start-line"></div>
          <div class="finish-line"></div>
          <div class="track-line"></div>
          <div class="horse-card hearts">A♥</div>
        </div>
      </div>
      <div class="suit-modal" id="suit-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none;">
        <div class="suit-modal-content">
          <h2>문양을 선택해주세요</h2>
          <div class="suit-grid">
            <button class="suit-button spades" data-suit="spades">♠</button>
            <button class="suit-button diamonds" data-suit="diamonds">♦</button>
            <button class="suit-button clubs" data-suit="clubs">♣</button>
            <button class="suit-button hearts" data-suit="hearts">♥</button>
          </div>
          <button class="confirm-suit-button" disabled>선택 완료</button>
        </div>
      </div>
      <div class="chat-container" id="chat-container">
        <div class="chat-header">
          <span>게임 메시지</span>
          <div class="chat-controls">
            <button id="clear-messages" class="control-button">Clear</button>
            <button id="single-line" class="control-button">1</button>
            <button id="maximize-chat" class="maximize-button">⛶</button>
          </div>
        </div>
        <div class="chat-messages"></div>
      </div>
    </div>
  </div>
</div>
<div class="online-users">
  <h2>접속중인 유저</h2>
  <div id="online-users-list"></div>
</div>`,Qd(),Hd(),Cd(),Fd()});function Cd(){const t=document.querySelector(".start-game-button");t&&(t.textContent="경마장 입장",t.disabled=!1,t.addEventListener("click",()=>{document.getElementById("welcome-screen").style.display="none",document.getElementById("game-screen").classList.add("active"),jt("경마장에 입장했습니다! 문양을 선택해주세요.")})),window.addEventListener("beforeunload",()=>{Do(At)}),document.querySelectorAll(".suit-button").forEach(e=>{e.addEventListener("click",async()=>{await Cr();const n=e.dataset.suit;Xd(At,n)})}),document.querySelector(".confirm-suit-button").addEventListener("click",Jd)}function Zd(){const t=document.getElementById("suit-modal");t&&(t.style.display="block")}function Fd(){document.getElementById("clear-messages").addEventListener("click",()=>{const t=document.querySelector(".chat-messages");if(t){for(;t.firstChild;)t.removeChild(t.firstChild);jt("메시지가 모두 지워졌습니다.")}}),document.getElementById("single-line").addEventListener("click",()=>{const t=document.getElementById("chat-container"),e=document.getElementById("single-line");t.classList.contains("single-line")?(t.classList.remove("single-line"),e.classList.remove("active")):(t.classList.add("single-line"),t.classList.remove("maximized"),document.getElementById("maximize-chat").textContent="⛶",e.classList.add("active"))}),document.getElementById("maximize-chat").addEventListener("click",()=>{const t=document.getElementById("chat-container"),e=document.getElementById("maximize-chat");t.classList.contains("maximized")?(t.classList.remove("maximized"),t.classList.remove("single-line"),document.getElementById("single-line").classList.remove("active"),e.textContent="⛶"):(t.classList.add("maximized"),t.classList.remove("single-line"),document.getElementById("single-line").classList.remove("active"),e.textContent="_")})}async function jd(){await pi.ready();const{code:t}=await pi.commands.authorize({client_id:"1361227933670178916",response_type:"code",scope:["identify","guilds","applications.commands"],prompt:"none",state:""}),e=await fetch("/.proxy/api/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})}),{access_token:n}=await e.json();Ro=await pi.commands.authenticate({access_token:n})}function Kd(t){if(t==0)return"안타깝네요! 점수를 획득하지 못했습니다.";if(t==1)return"아쉽습니다! 🥉 3등입니다. 1점을 획득합니다.";if(t==3)return"아깝습니다! 🥈 2등입니다. 3점을 획득합니다.";if(t==5)return"축하합니다! 🥇 1등입니다. 5점을 획득합니다."}function $d(t){const e=document.querySelector(`.horse-card.${t}`),n=qr();if(!e||!n.length)return;const r=Tt.currentHorsePositions[t]??0;e.style.left=`${n[r]}px`}function Yd(t){const n=qr();Object.entries(t).forEach(([r,i])=>{const s=document.querySelector(`.horse-card.${r}`);s&&n[i]&&(s.style.left=`${n[i]}px`,i>=7&&Kt("goal"))})}function xo(){const e=qr()[0]-40;["spades","hearts","diamonds","clubs"].forEach(n=>{const r=document.querySelector(`.horse-card.${n}`);r&&(r.style.left=`${e}px`)})}function qr(){const t=document.querySelector(".track.header-track");if(!t)return[];const e=t.querySelectorAll(".track-card"),n=t.getBoundingClientRect(),r=[],i=t.querySelector(".start-line").getBoundingClientRect();r.push(i.left-n.left-80),e.forEach(l=>{r.push(l.getBoundingClientRect().left-n.left)});const s=t.querySelector(".finish-line").getBoundingClientRect();return r.push(s.right-n.left+20),r}function zd(){var e;const t=document.createElement("div");t.textContent="🏁 경기가 끝났습니다!",t.style.color="gold",(e=document.querySelector(".chat-messages"))==null||e.appendChild(t)}function Nr(t,e){const n=document.querySelector(`#user-${t} .user-suit`);n&&(n.className=`user-suit ${e}`,n.textContent=ko(e))}function bs(t,e){const n=document.querySelector(`#user-${t} .user-score`);n&&(n.textContent=e)}function Ts(){xo(),Po({suit:"",value:""},52);const t=document.getElementById("suit-modal");t&&(t.style.display="block"),document.querySelectorAll(".suit-button").forEach(e=>{e.disabled=!1,e.style.background="rgba(255, 255, 255, 0.1)"})}function ko(t){return{spades:"♠",hearts:"♥",diamonds:"♦",clubs:"♣"}[t]||""}function Wd(){document.getElementById("welcome-screen").style.display="none",document.getElementById("game-screen").classList.add("active")}function Xd(t,e){if(Tt.selectedSuits[t]){const i=Tt.selectedSuits[t],s=document.querySelector(`.suit-button[data-suit="${i}"]`);s&&(s.style.background="rgba(255, 255, 255, 0.1)")}Tt.selectedSuits[t]=e;const n=document.querySelector(`.suit-button[data-suit="${e}"]`);n&&(n.style.background="rgba(255, 255, 255, 0.3)"),Nr(t,e);const r=document.querySelector(".confirm-suit-button");r&&(r.disabled=!1)}async function Jd(){await Cr();const t=Tt.selectedSuits[At];if(!t){showNotification("문양을 먼저 선택해주세요.");return}const e=document.getElementById("suit-modal");e&&(e.style.display="none");const n=document.querySelector(".chat-container");n&&n.classList.add("active"),me.emit("select_suit",{userId:At,userName:Yn,selectedSuit:t}),Kt("shuffle")}async function Cr(){Ot==null&&(Ot=await(await fetch("https://discord.com/api/v10/users/@me",{headers:{Authorization:`Bearer ${Ro.access_token}`}})).json(),At=Ot.id,Yn=Ot.global_name??`${Ot.username}#${Ot.discriminator}`)}async function Qd(){const t=document.querySelector("#user-info");await Cr();const e=`https://cdn.discordapp.com/avatars/${At}/${Ot.avatar}.png?size=256`;if(Lo(At,Yn,e),t){const n=document.createElement("div");n.className="user-container";const r=document.createElement("img");r.src=e,r.width=64,r.height=64,r.style.borderRadius="50%",n.appendChild(r);const i=document.createElement("p");i.textContent=`${Yn}님, 즐거운 게임 되세요!`,i.className="welcome-text",n.appendChild(i),t.appendChild(n)}}function Lo(t,e,n){if(document.querySelector(`#user-${t}`))return;const r=document.createElement("div");r.className="online-user-item",r.id=`user-${t}`,r.innerHTML=`
    <div class="user-suit"></div>
    <img src="${n}" width="32" height="32" />
    <span class="user-name">${e}</span>
    <span class="user-score">0</span>
  `,document.getElementById("online-users-list").appendChild(r)}function Do(t){const e=document.querySelector(`#user-${t}`);e&&e.remove()}function gi(t=3){if(wn){clearInterval(wn);const r=document.querySelector(".timer");r&&r.remove()}const e=document.createElement("div");e.className="timer",e.textContent=t.toString(),document.querySelector(".game-board").appendChild(e);let n=t;wn=setInterval(()=>{n--,e.textContent=n.toString(),Kt("tick"),n<=0&&(clearInterval(wn),wn=null,e.remove())},1e3)}function jt(t){const e=document.querySelector(".chat-messages");if(!e)return;const n=document.createElement("div");n.className="system-message",n.textContent=t,e.appendChild(n),e.scrollTop=e.scrollHeight}function Po(t,e){const n=document.querySelector(".drawn-card");if(!n)return;if(!t.suit){n.style.display="none";return}n.className=`drawn-card ${t.suit}`,n.textContent=`${t.value}${ko(t.suit)}`,n.style.display="flex";const r=document.querySelector(".card-count");r&&(r.textContent=e,r.style.display="block")}window.addEventListener("resize",()=>{requestAnimationFrame(()=>{const t=qr();Object.keys(Tt.currentHorsePositions).forEach(e=>{const n=document.querySelector(`.horse-card.${e}`);n&&(n.style.left=`${t[Tt.currentHorsePositions[e]]}px`)})})});
